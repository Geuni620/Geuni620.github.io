{"componentChunkName":"component---src-templates-post-template-tsx","path":"/blog/2024/6/22/supabase-rls/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/27724e538ff31b2b31a79e73df155bc1/d71bc/img.webp\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/webp;base64,UklGRtYAAABXRUJQVlA4IMoAAADQBQCdASoUABQAPtFgqE+oJSOiKAgBABoJQBajZohW6/h5Oh6/0qFPzwcVotDIcmLVpojWgXQQAP6f1oSmBGtwOm9LEDKbMDdQuKHOvemaVwhGMAVsHzWQQUwdV9o6d/+q9+I0gnxzbDdQmbHT5kX8mFojfxp5yrf9UZNnQMfMyKEz7l3D7evfdq/zu9AwjJ9f3An6uNLig0qFURSBBrTLTFMMUPxA/pA3l/fommFXdVdV0oI6/bKlS8mJ6gZUdOujg0MrgCnigAAA'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/27724e538ff31b2b31a79e73df155bc1/a59e9/img.webp 192w,\n/static/27724e538ff31b2b31a79e73df155bc1/0ca9f/img.webp 384w,\n/static/27724e538ff31b2b31a79e73df155bc1/dc9b9/img.webp 768w,\n/static/27724e538ff31b2b31a79e73df155bc1/d71bc/img.webp 1024w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/27724e538ff31b2b31a79e73df155bc1/a59e9/img.webp 192w,\n/static/27724e538ff31b2b31a79e73df155bc1/0ca9f/img.webp 384w,\n/static/27724e538ff31b2b31a79e73df155bc1/dc9b9/img.webp 768w,\n/static/27724e538ff31b2b31a79e73df155bc1/d71bc/img.webp 1024w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/webp\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/27724e538ff31b2b31a79e73df155bc1/dc9b9/img.webp\"\n            alt=\"img\"\n            title=\"img\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Supabase를 사용할 때, 보통 Next.js로 사용해왔다.<br>\nAPI 핸들링은 Next.js API 폴더 내에서, Supabase는 ORM처럼 사용하곤 했다.<br>\n이번엔 React를 사용해서 Supabase를 써보려고 한다.</p>\n<br/>\n<h1 id=\"row-level-security가-왜-필요할까\" style=\"position:relative;\"><a href=\"#row-level-security%EA%B0%80-%EC%99%9C-%ED%95%84%EC%9A%94%ED%95%A0%EA%B9%8C\" aria-label=\"row level security가 왜 필요할까 permalink\" class=\"headerElement before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Row Level Security가 왜 필요할까?</h1>\n<p>예를 들어 이런 상황을 생각해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// utils/supabase.ts</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createClient <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@supabase/supabase-js'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> supabase <span class=\"token operator\">=</span> <span class=\"token function\">createClient</span><span class=\"token punctuation\">(</span>\n  <span class=\"token keyword\">import</span><span class=\"token punctuation\">.</span>meta<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">VITE_SUPABASE_URL</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">import</span><span class=\"token punctuation\">.</span>meta<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">VITE_SUPBASE_KEY</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// useTaskGetQuery.ts</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchTask</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> supabase<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token constant\">TASK</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token string\">'*'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useTaskGetQuery</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    queryKey<span class=\"token operator\">:</span> <span class=\"token constant\">QUERYKEYS</span><span class=\"token punctuation\">,</span>\n    queryFn<span class=\"token operator\">:</span> fetchTask<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">VITE_SUPABASE_URL</code>과 <code class=\"language-text\">VITE_SUPABASE_KEY</code>는 env를 통해 설정해주었지만, 클라이언트 환경에선 완전히 숨길 수 없다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/633b4a7a07df962a1bf1ebdc5b0e27eb/e2156/env.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABL0lEQVQoz52RW0/CQBCF+/9/lQ+YQJCgErkoICrd3ZbFdrZQy1b7GVbFGy86yZdzzmTmZSYyrROk18EPL6lHA6TXJjk9wbZbZJ0WldH4F/C+xvvn49SfPkrsmp33fFSx2SDOfev9pSIzn2Fu57xsHFQlRWpIFnMyFeMSHRCjEK3Y2pTa5dSS4yULGnD7/OYjd9GlWkxB3YNZko8GqF6H5PwM3e+SXJwFb/b0u9hBn+J6iJtcBQ3cjA452orw5IRmV0HtkVXKcj7DahVYG31gn/NVGuZ/IULlhMgkKZX3NO83kKIgWa3Y1XXIzZE7NV+0+ZEjay1FURyGy7Kk3G5pmuZ/TxmNJ9xMp2RZjohjcXfHeDLh/uGBOI5RWhMrFdDGoPY+fmMZx9j1Ouw+ZlngFY0OYfYS8niwAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/633b4a7a07df962a1bf1ebdc5b0e27eb/a59e9/env.webp 192w,\n/static/633b4a7a07df962a1bf1ebdc5b0e27eb/0ca9f/env.webp 384w,\n/static/633b4a7a07df962a1bf1ebdc5b0e27eb/dc9b9/env.webp 768w,\n/static/633b4a7a07df962a1bf1ebdc5b0e27eb/e2c2f/env.webp 1152w,\n/static/633b4a7a07df962a1bf1ebdc5b0e27eb/f3efb/env.webp 1536w,\n/static/633b4a7a07df962a1bf1ebdc5b0e27eb/bad56/env.webp 2374w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/633b4a7a07df962a1bf1ebdc5b0e27eb/3b721/env.png 192w,\n/static/633b4a7a07df962a1bf1ebdc5b0e27eb/66595/env.png 384w,\n/static/633b4a7a07df962a1bf1ebdc5b0e27eb/fe486/env.png 768w,\n/static/633b4a7a07df962a1bf1ebdc5b0e27eb/d2d74/env.png 1152w,\n/static/633b4a7a07df962a1bf1ebdc5b0e27eb/e8464/env.png 1536w,\n/static/633b4a7a07df962a1bf1ebdc5b0e27eb/e2156/env.png 2374w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/633b4a7a07df962a1bf1ebdc5b0e27eb/fe486/env.png\"\n            alt=\"위 환경변수를 사용하는 테이블에선 RLS를 적용했다.\"\n            title=\"위 환경변수를 사용하는 테이블에선 RLS를 적용했다.\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">위 환경변수를 사용하는 테이블에선 RLS를 적용했다.</figcaption>\n  </figure></p>\n<p>스크린샷처럼 API 요청시, 네트워크 탭을 확인해보면,<br>\nenv로 설정했던 URL과 KEY가 모두 드러나는 것을 확인할 수 있다.</p>\n<p>이를 통해, 타 사용자가 내 DB에 저장된 소중한 데이터를 마음대로 삭제해버릴 수도 있다.</p>\n<!-- 이를 복사해서 API 요청, POST Method 뚫어서 확인하기 -->\n<br/>\n<h1 id=\"row-level-security-설정하기\" style=\"position:relative;\"><a href=\"#row-level-security-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\" aria-label=\"row level security 설정하기 permalink\" class=\"headerElement before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Row Level Security 설정하기</h1>\n<p>이를 예방하기 위해 RLS를 설정해보자.<br>\n해당 내용은 <a href=\"https://www.youtube.com/watch?v=yZ89etxVBKs\" target=\"_blank\" rel=\"nofollow\">생활코딩 Supabase 인증과 Serverless App</a> 영상을 참고했다.<br>\n먼저 나는 supabase에서 프로젝트를 만들어놓은 상태에서 시작했다.</p>\n<h2 id=\"1-github으로-로그인\" style=\"position:relative;\"><a href=\"#1-github%EC%9C%BC%EB%A1%9C-%EB%A1%9C%EA%B7%B8%EC%9D%B8\" aria-label=\"1 github으로 로그인 permalink\" class=\"headerElement before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Github으로 로그인</h2>\n<p>먼저 만들어놓은 프로젝트의 왼쪽 메뉴에서 <code class=\"language-text\">Authentication</code>을 클릭한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bf06ac384ed7894e2223679ce5f0dc7a/904ef/supabase-provider.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 94.79166666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAACIElEQVQ4y5WU26rbMBBF/f9fVgql9KWlpRTSxEl8k2TdRtfsItk+JCbnkD4sNJY9yyNp7KZTDOMwoOs6EBG0IVz7Cf3IITVh4hJMKIxsrvOztnW+jHuktmjULKG0hvcezjkobWGsgyWHYeLohqnOWfKV8kJllmf2aEtoJDloJaGUqsKSUCotMe+OuLQHDP0F43BB350h2AAtOTzpB4IzCN6gkd+/ofvyCep8AtUKDewqTLoHH1qM3QlsaDH1J0jewRkG0lMdl5ghewVEg4Z9/Yzz718YL+e1QrsKCdFbqJlDCgY5M3hSSF4jBYMcLHIdl9h5BeclGuU8xCww8/5tyVuF9VorpBiRUkSMhYAQHskxoSOBK3E0Wqn1QPxOSHVeiLnu6SJ7hxThyYFMOeX1MLaDeKyQIASr4g+FMdZ8YwwarfVToXelFSxGNtZlvSzcZERuJyQY69ENEmTNkljEz7gXLjJ6rNAuMYWMcTbwISDdgHS7vQPgQoB17l54X6GDIwt1PODy8wd0ewRdW9jLxmlHC3X6C3k8PBPa+ianFfThD6ahh+YMinNINkFzDi3EU8ws3qlwFSY24gYgplS/orK3IUbkssyckfIyluuND4Vx7OoelftSyrcfSN3vlRLft9VLwtJCW7/u2YQppVeFqEIhRKW0xr4zgg//I7zVxi6igrV2Yc0TasZsFHLOrwvLz6EkFEolhU1QZIoMclqE/wB1A8By6CTKrwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/bf06ac384ed7894e2223679ce5f0dc7a/a59e9/supabase-provider.webp 192w,\n/static/bf06ac384ed7894e2223679ce5f0dc7a/0ca9f/supabase-provider.webp 384w,\n/static/bf06ac384ed7894e2223679ce5f0dc7a/dc9b9/supabase-provider.webp 768w,\n/static/bf06ac384ed7894e2223679ce5f0dc7a/e2c2f/supabase-provider.webp 1152w,\n/static/bf06ac384ed7894e2223679ce5f0dc7a/f3efb/supabase-provider.webp 1536w,\n/static/bf06ac384ed7894e2223679ce5f0dc7a/8ccaf/supabase-provider.webp 2666w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/bf06ac384ed7894e2223679ce5f0dc7a/3b721/supabase-provider.png 192w,\n/static/bf06ac384ed7894e2223679ce5f0dc7a/66595/supabase-provider.png 384w,\n/static/bf06ac384ed7894e2223679ce5f0dc7a/fe486/supabase-provider.png 768w,\n/static/bf06ac384ed7894e2223679ce5f0dc7a/d2d74/supabase-provider.png 1152w,\n/static/bf06ac384ed7894e2223679ce5f0dc7a/e8464/supabase-provider.png 1536w,\n/static/bf06ac384ed7894e2223679ce5f0dc7a/904ef/supabase-provider.png 2666w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/bf06ac384ed7894e2223679ce5f0dc7a/fe486/supabase-provider.png\"\n            alt=\"supabase provider\"\n            title=\"supabase provider\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>그리고 Github을 클릭했을 때 다음과 같이 Client ID와 Client Secret를 요구한다.<br>\n(이때 github ID와 비밀번호를 <strong>적는게 아니다.</strong>)</p>\n<p>이제 Github으로 이동한다.</p>\n<ul>\n<li>로그인 이후, 오른쪽 상단에서 프로필 클릭 → 노출된 메뉴 중 <code class=\"language-text\">Settings</code>를 클릭해주자</li>\n<li>이동된 페이지에서 왼쪽 메뉴들 중 가장 아래에 존재하는 <code class=\"language-text\">&lt; > Developer settings</code>를 클릭해주자</li>\n</ul>\n<p>그럼 아래와 같은 페이지가 나온다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/850377354c0714684bdf1623d63715c5/7f607/github-settings-oauth.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 15.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAo0lEQVQI122Puw7CMAxF+9mdWREbn9CN/gOvAbWCsqDSASQkEFNhIWnavA5KEBN4ubZsn2snj/rAvSrprhc8YIzF+5D9hnMepQb6Xkflz1zyDMBdQdvUCCkj0DkXm1obXkIihET1A7dzQ1Us2Jcrtps5x+ZEK0FIhZQdxhiS4BHWbVBrI+h7YQAHA210rMtVzjhLmc5GTLKU9TL/GBuNtTZ+8AYnLOLGS9Fb9QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/850377354c0714684bdf1623d63715c5/a59e9/github-settings-oauth.webp 192w,\n/static/850377354c0714684bdf1623d63715c5/0ca9f/github-settings-oauth.webp 384w,\n/static/850377354c0714684bdf1623d63715c5/dc9b9/github-settings-oauth.webp 768w,\n/static/850377354c0714684bdf1623d63715c5/e2c2f/github-settings-oauth.webp 1152w,\n/static/850377354c0714684bdf1623d63715c5/f3efb/github-settings-oauth.webp 1536w,\n/static/850377354c0714684bdf1623d63715c5/cb0d1/github-settings-oauth.webp 2112w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/850377354c0714684bdf1623d63715c5/3b721/github-settings-oauth.png 192w,\n/static/850377354c0714684bdf1623d63715c5/66595/github-settings-oauth.png 384w,\n/static/850377354c0714684bdf1623d63715c5/fe486/github-settings-oauth.png 768w,\n/static/850377354c0714684bdf1623d63715c5/d2d74/github-settings-oauth.png 1152w,\n/static/850377354c0714684bdf1623d63715c5/e8464/github-settings-oauth.png 1536w,\n/static/850377354c0714684bdf1623d63715c5/7f607/github-settings-oauth.png 2112w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/850377354c0714684bdf1623d63715c5/fe486/github-settings-oauth.png\"\n            alt=\"github settings oauth\"\n            title=\"github settings oauth\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>그리고 <code class=\"language-text\">Register a new apllication</code>을 누른다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2ac13bfcfcde6425845666d71e211ff4/c8d22/github-settings-oauth-callback.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 121.35416666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAABYlAAAWJQFJUiTwAAAD0UlEQVQ4y5WVSW/bRhiG9Wd77KWHtIcCRQ9pDm1u7aHoXyjQAkWMHOzYjhIncqzF1mZrZSSuoriKpLg/BUdSaiROgA7w4JsZkC/nm3m/YS1NEkzTxLZtge/7uK6L53nYtoNlWaLvOI6gmqueK/Ic0cryP4BalKR0B0OuWm1Gkynvl7KI4+mMu/GE3mDIdC5x2WzR6w/p9gdiLklTIVBUWuwpS2rlfETcOCdqXpC037JtvqboNGDYgduK613/wO2eXpOyd0VZxesGpakJ0VrSuWR8c8N4NmexWDKbS9hri7IoybJ8R56T76n61dxhXCWeu87uY5Vg0WuiTSb0h3dMJzMmowmaqhOFEYEfEGzu4d/jMA5jAk2lHLR3gvn7CV79GL9RJ2jU2TTqOK9PseonOK9eYL96gXtxRnF9Sf4QN+/IO28pnfVOMOk2UY/+Ynl8hHx8hHp8RNm9oui3qFZ/gGoFD1Ht8XUDFGm3h2m3iabpSKbNwrRQbQ8vzggKyIB0T/IlwpBycNjD1gXq+THjl2dMX54yq58xOj1Bev2S4LbPZtjDH/YI7wZEoyHhaCjiByYjws47yg+H4tqEszGhNCNazImXEqE0xZ+OcMa3OKNbVoMuiSyBoVLqygPIsI32KRcFc0VlLisoxoqlZvBe1VBXJv+3CWNnWYamGyxlFU1foWo6iqqhGysc18fzN0TbmCRJRXmVX2CXcl7gb0JsxxMvu56/FwqwbFfMR9uEON4LFgU8xEGwcrqfZLhRjLWJ8LYJGzHeRTvYsnI3GI5HekjtM1SitXzUwz59jv3mjHX9GPftuYjOxakweFaZt3slKPutT31Yne7NJVSHs6vlBrPuDZK0YDaZslwsGY/GSHMJaTojDUOyNCVLEtL4Y2LSLCddm6L0hGDRfkMmTUmtNdnKIDV0MnNFujLITINIVYhU+QPbe0SKTKTrwo8cjJ0rC9xWA6vTxGq/w+u2WbcusTtXIloVnSvkVg+l3Udu9Vk0+yitHs51U2A1G6ylOWGcUCsAK4yQzTWa5bDyfFTLxouTz/utulg/OhAxLgpqeZ5hVD5cLlEVGVVR0FUVyzSJo1CwjSLCICAMQkFU1W6RVwqf2qa6yjVjxdp2megRcyNkbkRM9YBb2edO9jFMm5VpYZhrVN3Asp3Pmrt2P480gyzfxeoftE0rCrGSw02dppnoF0VJURSfUJNdja///oFvnz3hm39+5NGzx3x39ISv/nxES+4SbkH30gfr9qFW032Txye/8vT8D346+Y2fz34XfP/8F/r6mCgBK8i+WMP3U/4XzJIJdIOl4HEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/2ac13bfcfcde6425845666d71e211ff4/a59e9/github-settings-oauth-callback.webp 192w,\n/static/2ac13bfcfcde6425845666d71e211ff4/0ca9f/github-settings-oauth-callback.webp 384w,\n/static/2ac13bfcfcde6425845666d71e211ff4/dc9b9/github-settings-oauth-callback.webp 768w,\n/static/2ac13bfcfcde6425845666d71e211ff4/4f5fd/github-settings-oauth-callback.webp 1030w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/2ac13bfcfcde6425845666d71e211ff4/3b721/github-settings-oauth-callback.png 192w,\n/static/2ac13bfcfcde6425845666d71e211ff4/66595/github-settings-oauth-callback.png 384w,\n/static/2ac13bfcfcde6425845666d71e211ff4/fe486/github-settings-oauth-callback.png 768w,\n/static/2ac13bfcfcde6425845666d71e211ff4/c8d22/github-settings-oauth-callback.png 1030w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/2ac13bfcfcde6425845666d71e211ff4/fe486/github-settings-oauth-callback.png\"\n            alt=\"github settings oauth callback\"\n            title=\"github settings oauth callback\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>name과 URL, 그리고 callback URL을 입력해줘야한다.<br>\n여기서 callback URL은 상단에 <code class=\"language-text\">Supabase Authentication</code>에서<br>\nGithub 창을 확인해보면 <code class=\"language-text\">Callback URL (for Auth)</code>라고 적힌게 있다.<br>\n이걸 붙여넣으면 된다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8c452aed213fadf39213e49a9061d2cc/f27d7/github-settings-oauth-client.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.541666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB0UlEQVQ4y42SC2sbMRCE/f//WQsNLWlLbMd2Sp3Y53tKOun0/srJMdh1oF0YVkjM7s6sFsom5BTpdUROCTVqlFLEGLlEzvm/sTDGYqzHx4zzCec8Qgz0fV8KG2NK0ZTzDfJVvo6FEoKmbdFaz7OQUmL/duRwaqibFilVuTsTb8n5vZG1rsB5z2LUmrbr8N6XxxAir1VHrRK91GXStuuxPhYVPkS8D4QQSpMYE10vONVtyYu5+8Wviw9iGKiqI0IIxlGhtKOWkZOMCGVQSjIPoo3l9VCx3uw41i2TCyyujb/IMLMEH27lze9/+RVixGjD0PVoOeKsY3G9oUJMib46YvoOnCXbiRzjeQHp7PEFM8Mpje16TNNh1fjBhLKn+faF7tcO15xw2xV56Lis5F+4LzhK5OMDYv1Et/xB+/CJeDpA8OTJgJ1u4ewN7gsqgfj6mfbnI+b5CZojtBU0Fbk+3kG+bGnXS7rNGrFZfSR5wHUNY0jYEBlGzThNhNlD7mP+Hz5lXMp4528LFsIomeoTtVBl0/tDRTMIeqmwIRBmcowl+5jw78uZz9Z8JFl0xOV3YvWG37+gNkvG7Qq9W6M2qwL5vDznzbKc3e8d+bgn7V/4A4Iz8so6FcyBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/8c452aed213fadf39213e49a9061d2cc/a59e9/github-settings-oauth-client.webp 192w,\n/static/8c452aed213fadf39213e49a9061d2cc/0ca9f/github-settings-oauth-client.webp 384w,\n/static/8c452aed213fadf39213e49a9061d2cc/dc9b9/github-settings-oauth-client.webp 768w,\n/static/8c452aed213fadf39213e49a9061d2cc/e2c2f/github-settings-oauth-client.webp 1152w,\n/static/8c452aed213fadf39213e49a9061d2cc/f3efb/github-settings-oauth-client.webp 1536w,\n/static/8c452aed213fadf39213e49a9061d2cc/abe75/github-settings-oauth-client.webp 2020w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/8c452aed213fadf39213e49a9061d2cc/3b721/github-settings-oauth-client.png 192w,\n/static/8c452aed213fadf39213e49a9061d2cc/66595/github-settings-oauth-client.png 384w,\n/static/8c452aed213fadf39213e49a9061d2cc/fe486/github-settings-oauth-client.png 768w,\n/static/8c452aed213fadf39213e49a9061d2cc/d2d74/github-settings-oauth-client.png 1152w,\n/static/8c452aed213fadf39213e49a9061d2cc/e8464/github-settings-oauth-client.png 1536w,\n/static/8c452aed213fadf39213e49a9061d2cc/f27d7/github-settings-oauth-client.png 2020w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/8c452aed213fadf39213e49a9061d2cc/fe486/github-settings-oauth-client.png\"\n            alt=\"github settings oauth client\"\n            title=\"github settings oauth client\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>확인 버튼을 누르고 난 뒤, 새롭게 뜨는 페이지에서, Client ID와 secrets를 복사해서,<br>\n<code class=\"language-text\">Supabase Authentication</code>로 이동한 뒤, 각각 붙여넣고 저장을 눌러주면 된다.</p>\n<br/>\n<h2 id=\"2-간단한-로그인-구현하기\" style=\"position:relative;\"><a href=\"#2-%EA%B0%84%EB%8B%A8%ED%95%9C-%EB%A1%9C%EA%B7%B8%EC%9D%B8-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0\" aria-label=\"2 간단한 로그인 구현하기 permalink\" class=\"headerElement before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 간단한 로그인 구현하기</h2>\n<p>이제 간단히 로그인을 추가해주자<br>\n그 전에, supabase에게 나의 웹사이트가 신뢰할 수 있다는 사이트임을 알리는 ‘화이트리스트’처리를 해줘야한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5d4bcea64102d7be603e5447d4b128b9/a3438/supabase-authentication-redirect.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.833333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABSklEQVQoz1VSy07DQAzc//8lJA5ISIgL4tJDEbQlhJI23WTfr6SDvM2u0sPIdhTPjsdmXAmMw4BhGOCcy1BKZVBujMnRWgutNbz3CCFUUL0Gk0Lm5vKBmkveti26rsuPFXDOK6iW8tZfIsuFEFBSVoWFVAhRmwhUl7yAlBfQNIzzAefLBco6+BDuCOknUkJENF6MsY6aUsI8z5imKYPy63wF48dfNC9PaJ4fYfsz7DI2Ye1TDBFxRUqRSAlTStDOgOsRTJPsvoM7tXDLArJC5zJBqqrul7FeSPAB2hrYGMHy5mK6YaWOQFb8nc6QSkNZC6U19HIBBPLML5cgxgGb7RsYGetXqjJZJrY47b9w3H2ib75xaQ6Q45hPpxCSxyTCWAfBe7y/PoDlV1bnUgi9MQi7LezPAbrZw35skJxDmqbqHflYvHTOI6UZ/4WVtc0NUmZJAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/5d4bcea64102d7be603e5447d4b128b9/a59e9/supabase-authentication-redirect.webp 192w,\n/static/5d4bcea64102d7be603e5447d4b128b9/0ca9f/supabase-authentication-redirect.webp 384w,\n/static/5d4bcea64102d7be603e5447d4b128b9/dc9b9/supabase-authentication-redirect.webp 768w,\n/static/5d4bcea64102d7be603e5447d4b128b9/e2c2f/supabase-authentication-redirect.webp 1152w,\n/static/5d4bcea64102d7be603e5447d4b128b9/f3efb/supabase-authentication-redirect.webp 1536w,\n/static/5d4bcea64102d7be603e5447d4b128b9/c1b26/supabase-authentication-redirect.webp 2670w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/5d4bcea64102d7be603e5447d4b128b9/3b721/supabase-authentication-redirect.png 192w,\n/static/5d4bcea64102d7be603e5447d4b128b9/66595/supabase-authentication-redirect.png 384w,\n/static/5d4bcea64102d7be603e5447d4b128b9/fe486/supabase-authentication-redirect.png 768w,\n/static/5d4bcea64102d7be603e5447d4b128b9/d2d74/supabase-authentication-redirect.png 1152w,\n/static/5d4bcea64102d7be603e5447d4b128b9/e8464/supabase-authentication-redirect.png 1536w,\n/static/5d4bcea64102d7be603e5447d4b128b9/a3438/supabase-authentication-redirect.png 2670w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/5d4bcea64102d7be603e5447d4b128b9/fe486/supabase-authentication-redirect.png\"\n            alt=\"supabase authentication redirect\"\n            title=\"supabase authentication redirect\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>supabase의 Authentication → URL Configuration → Redirect URLS로 들어가자<br>\n그리고 Add URL을 클릭한 뒤, 본인의 사이트 링크를 추가해주면 된다.</p>\n<br/>\n<p>그리고 간단한 Login UI를 추가해주자.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// utils/supabase</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createClient <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@supabase/supabase-js'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> supabase <span class=\"token operator\">=</span> <span class=\"token function\">createClient</span><span class=\"token punctuation\">(</span>\n  <span class=\"token keyword\">import</span><span class=\"token punctuation\">.</span>meta<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">VITE_SUPABASE_URL</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">import</span><span class=\"token punctuation\">.</span>meta<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">VITE_SUPBASE_KEY</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">// hooks/useLogin.ts</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Session <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@supabase/supabase-js'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useEffect<span class=\"token punctuation\">,</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> supabase <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@/utils/supabase'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token constant\">PROVIDER</span> <span class=\"token operator\">=</span> <span class=\"token string\">'github'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useLogin</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>session<span class=\"token punctuation\">,</span> setSession<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Session <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onSessionChange</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>session<span class=\"token operator\">:</span> Session <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setSession</span><span class=\"token punctuation\">(</span>session<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onLoginClick</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">await</span> supabase<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span><span class=\"token function\">signInWithOAuth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      provider<span class=\"token operator\">:</span> <span class=\"token constant\">PROVIDER</span><span class=\"token punctuation\">,</span>\n      options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        redirectTo<span class=\"token operator\">:</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">.</span>meta<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">VITE_ORIGIN_URL</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onLogoutClick</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">await</span> supabase<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span><span class=\"token function\">signOut</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    supabase<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span><span class=\"token function\">getSession</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> data<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> session <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">onSessionChange</span><span class=\"token punctuation\">(</span>session<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n      data<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> subscription <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> supabase<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span><span class=\"token function\">onAuthStateChange</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>_event<span class=\"token punctuation\">,</span> session<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">onSessionChange</span><span class=\"token punctuation\">(</span>session<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> subscription<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    session<span class=\"token punctuation\">,</span>\n    onLoginClick<span class=\"token punctuation\">,</span>\n    onLogoutClick<span class=\"token punctuation\">,</span>\n    onSessionChange<span class=\"token punctuation\">,</span>\n    setSession<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// src/app.tsx</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Dashboard <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@/components/dashboard'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Login <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@/components/login'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useLogin <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@/hooks/useLogin'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useTaskGetQuery <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@/hooks/useTaskGetQuery'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> session<span class=\"token punctuation\">,</span> onLoginClick <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useLogin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">//...</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>session<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Login</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onLoginClick<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Dashboard</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>코드를 작성하다보니, <code class=\"language-text\">VITE_SUPABASE_URL</code>와 <code class=\"language-text\">VITE_SUPBASE_KEY</code>, <code class=\"language-text\">VITE_ORIGIN_URL</code>가 눈에 띈다.<br>\n먼저, <code class=\"language-text\">VITE_SUPABASE_URL</code>과 <code class=\"language-text\">VITE_SUPBASE_KEY</code>는 supabase 페이지에서 Settings의 API를 확인해보면,<br>\nProject API Keys를 확인할 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3f7f9061a95aeb341a248961228c96aa/893ad/supabase-settings-api.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 102.08333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAACYElEQVQ4y41Ua2/bMAz0//91GzBsa5cWXZo2sSX5oTdlZTeQjjOjbYp9OFCypCN5J7np3YRxGOC9R0oJMUaM44h+HOFCEISUMDmHEBMSEVLOSJneIMM6h8ZZi04pTJMVwpwzYghQh2c4ozEHD3IWxbsFPL6ANuD5HAMa5xx01yJ6i5yWCrLuEF6fUcYedRoEZTDIRl1BRoN6Ld/nwYCGHrR/RGOlFY8YPVKZBdQdURm82SjUXiOrE9zLM/zrQaI97CXy96I7KSI/3KFxWkF9+wK3u0N6vEcyGpkKemMwGIMUwoJ4gYwjCtE7zKWgsX2P0+4e7vQqWdI0IpcixhhjME2TjMdpEsMyEYgItVbU8/kfZP4HjRcnI0LKQiQtmw5u/4TQHnEezdJ6r0GqBelWYu5O0q7E7oTEa78fFpe5PXZ2MaWA2iNm02Fm5+yI6iaRwhz2sO0RXrXwXQvXnST67gSWjp52aPiqBCbju8WEOSN7hzgY+J8/QLtfOEcPGgyCahF0h2iUJFigQGOPPBgk3S2ETHYl5DmLXCtoZsygWkUOluU9Ll3xvrkuhCvpdmy0hnMWdZ5RShEH53n+ELxOF6dvEjJ4s7hXqxzi58nysNtb8Np6/kNCzsYviK8Ngw8xEX9bCbdxTUSfVbhu3kLu4aX6re6ciEl5fpOQLzSTcLu3tFuxysLjm4SckbE9xC2JDNpAaw2lFKy1V3xa4S03ub1VS7o8Q97P8VJh/O8KmZAr5Lcdw3uNpcLMv6wbFW71WwlZW+/8de8WvN6471+XN/yGkDPyhpV0JfzI6RWFCv4CXjoKeRXIibIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/3f7f9061a95aeb341a248961228c96aa/a59e9/supabase-settings-api.webp 192w,\n/static/3f7f9061a95aeb341a248961228c96aa/0ca9f/supabase-settings-api.webp 384w,\n/static/3f7f9061a95aeb341a248961228c96aa/dc9b9/supabase-settings-api.webp 768w,\n/static/3f7f9061a95aeb341a248961228c96aa/e2c2f/supabase-settings-api.webp 1152w,\n/static/3f7f9061a95aeb341a248961228c96aa/f3efb/supabase-settings-api.webp 1536w,\n/static/3f7f9061a95aeb341a248961228c96aa/e2a73/supabase-settings-api.webp 2826w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/3f7f9061a95aeb341a248961228c96aa/3b721/supabase-settings-api.png 192w,\n/static/3f7f9061a95aeb341a248961228c96aa/66595/supabase-settings-api.png 384w,\n/static/3f7f9061a95aeb341a248961228c96aa/fe486/supabase-settings-api.png 768w,\n/static/3f7f9061a95aeb341a248961228c96aa/d2d74/supabase-settings-api.png 1152w,\n/static/3f7f9061a95aeb341a248961228c96aa/e8464/supabase-settings-api.png 1536w,\n/static/3f7f9061a95aeb341a248961228c96aa/893ad/supabase-settings-api.png 2826w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/3f7f9061a95aeb341a248961228c96aa/fe486/supabase-settings-api.png\"\n            alt=\"supabase settings api\"\n            title=\"supabase settings api\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>여기서 각각의 URL(Project URL)과 KEY(PRoject API Keys, public)를 추가해주면 된다.</p>\n<br/>\n<p>자, 그럼 화면에서 로그인 버튼을 클릭해서 로그인 해보자!</p>\n<p><img src=\"/025390836e4000d18f118933bd1d8b93/login.gif\" alt=\"\"></p>\n<p>Github의 인증을 거쳐서 로그인이 완료된 것을 확인할 수 있다.</p>\n<br/>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 392px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/806d40e412d1e1c38b1a0b965df23748/c4bf7/session.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 89.0625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAADyElEQVQ4y12S22/TdhTH+z/yuue97JGHARMSaN24ZGyFjbLShwqJCdA2bWxs4zImKNDQkdDSNG3iXOwmvv0c52LH8d3+THFBoxzp6FjHxx9/z+/7W4iPf4RTOsXsq8/wL53GvXCSaOkM+fIXZFcXyb5bPKzv8tvPyVZLpJ8cI5MlUiDLcrJ5BRai29cZA8L1sPwQw/XwgQSI3w69e07e5ryX31ohr75gHnkYkk1d8sBnIf1hGScI6XfbWHofW5jYQnDQ7dJTZHzPY2CayJ0OPVnG0lTyOWXtG4I7N4htm0iRCWo7RAcKC/HNq/SsAdv7Bvc2emiDKUkaYVoC0zQxTAPN0JkFPsPRsPiJ7kd4qyWQaoSahr9VIWzsE3XaLHBntZA9cgI68hChWQSOx9gcMHM9xsJGdFWGqokzmjC2LIbOlOB6iXRzncidEioKkaYdKszvXC/OZB6TuoL+ok5/vYZyv8K4pSEqEvJfr+j8Wkbd3CNLI4gjKJ2Ah7+QdSSQ6tBXCPb3DoH5W6CrDlCf72K8aiK22mgbdYKRi1mRGGmCaRAjyUPeWDnti+dpPXhCtR/yfFun3RsXjCNAzxgVH5vVFiNJZbCrMO7oRc93XFwvQumPkSagLpXQnz6j5+bstm30gXcI5D3gRDFRHr0uVp5D1Gc13L6FXt5npJpM05z1LZ17NZeDry+CXOfDOAKciTH6ZgOzKmHXD9DKe4yaKpOugdjtYnd09KaKCCFau0z64jFJGJFGEbE9ILEHR4HDRg+j0sT4t4G+uU/795dY253iHPtPd1AeVNAev2YSJHDrGv7NVcJ+n1hTCdsSkdw9CvRtB21jj0FNxtrpFubMV57XeV8r7xfXaR7J5bMk//xJPBoTSo0CGhv6+8CcmTUp3J3IZqF2vvrcnFFLxai2MMp1Bs1OMZ+vLZG+fEIkBLHaI7FEkQv57f8VOgcC5VGV9t0N9PIeriI4eFhFuv0UIauHyhp1/HabZOkM8YO7JDP/A1N+XiuAY8/Dn0WMuhbDjsC1p4wGE0xVIPoWYZySBiGRrhNNZyQrF4ke/kbseaSTMbGuHSrk2pdktoXYqTIuV1Bu3EX98T6e1GCmtBC11xg7VXKhkjd3idf/Jq5tw6VTZH/8RCLLpMIkeLNF2GqywMo58pVzmIvHiZYXCa4t4iydZlw6yejCCSalUwzPf4pYPM7sylmmV84SfH+O3Y+P0d2qoJgC3TTfW7mwAyZRTAhMkwwvzYtL7MQJbpJiTT2GfoCX5cW7+Zxs2ai6jmnoOI5DnmWQ5/wH0lsWzwgdvKAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/806d40e412d1e1c38b1a0b965df23748/a59e9/session.webp 192w,\n/static/806d40e412d1e1c38b1a0b965df23748/0ca9f/session.webp 384w,\n/static/806d40e412d1e1c38b1a0b965df23748/480c8/session.webp 392w\"\n              sizes=\"(max-width: 392px) 100vw, 392px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/806d40e412d1e1c38b1a0b965df23748/3b721/session.png 192w,\n/static/806d40e412d1e1c38b1a0b965df23748/66595/session.png 384w,\n/static/806d40e412d1e1c38b1a0b965df23748/c4bf7/session.png 392w\"\n            sizes=\"(max-width: 392px) 100vw, 392px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/806d40e412d1e1c38b1a0b965df23748/c4bf7/session.png\"\n            alt=\"session\"\n            title=\"session\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\nsession state에 log를 찍어보면, Token 및 유저 정보가 담긴 것도 확인할 수 있다.</p>\n<br/>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e09034455294b003a7323ca8090c503a/65910/supabase-authentication-user.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.541666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABCklEQVQoz6WQ207DMBBE/f+fxltBVNBLCFRtk/juje1NEAyyq6Cq6hM8HM14V17tjlD9AK0kOCWMRNDGIBBVnPcIgWCMRUwJPE3IzJXFF40x4SA79FZBhPUK3Lwib54RuxO8c/BGwxsDcg5GSpCz1ccQkKhAiMHXd4GsxUPzhNVxB2G1wug9OGfkocOwfgS9N3DNFna/QT5+VEK7r+jtC+Khrd6/7WrPt3t8n4/4shZikOpyzjyDKSD2JyTZg7UEqwGzUfh0pmqh1Kfirf7VUp+MBI8EMXRn2PJ5yaYMnuaaTdFcsrpi6eV7MEPEMSBFuoRdzr6Bb7hXu0bUTa6GLb7oXxB8s9l/B/4AgaFmsGkHTCAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/e09034455294b003a7323ca8090c503a/a59e9/supabase-authentication-user.webp 192w,\n/static/e09034455294b003a7323ca8090c503a/0ca9f/supabase-authentication-user.webp 384w,\n/static/e09034455294b003a7323ca8090c503a/dc9b9/supabase-authentication-user.webp 768w,\n/static/e09034455294b003a7323ca8090c503a/e2c2f/supabase-authentication-user.webp 1152w,\n/static/e09034455294b003a7323ca8090c503a/f3efb/supabase-authentication-user.webp 1536w,\n/static/e09034455294b003a7323ca8090c503a/d28be/supabase-authentication-user.webp 2976w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/e09034455294b003a7323ca8090c503a/3b721/supabase-authentication-user.png 192w,\n/static/e09034455294b003a7323ca8090c503a/66595/supabase-authentication-user.png 384w,\n/static/e09034455294b003a7323ca8090c503a/fe486/supabase-authentication-user.png 768w,\n/static/e09034455294b003a7323ca8090c503a/d2d74/supabase-authentication-user.png 1152w,\n/static/e09034455294b003a7323ca8090c503a/e8464/supabase-authentication-user.png 1536w,\n/static/e09034455294b003a7323ca8090c503a/65910/supabase-authentication-user.png 2976w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/e09034455294b003a7323ca8090c503a/fe486/supabase-authentication-user.png\"\n            alt=\"supabase authentication user\"\n            title=\"supabase authentication user\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>그리고 supabase 페이지내에서, 스크린샷과 같은 위치로 이동해보자.<br>\nsupabase 내에서도 로그인이 성공한 것을 스크린샷 이미지를 통해 확인할 수 있다.</p>\n<br/>\n<h2 id=\"3-row-level-security-적용하기\" style=\"position:relative;\"><a href=\"#3-row-level-security-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"3 row level security 적용하기 permalink\" class=\"headerElement before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Row Level Security 적용하기</h2>\n<p>미리 supabase 내 테이블을 만들고, 데이터를 넣어두었다.<br>\n하지만, RLS 설정은 하지 않은 테이블이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/56ba12e86283e5cf95d90cf8182f9291/3fbc1/supabase-table-rls-disabled.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 16.145833333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAnklEQVQI1zWOsQ7CMAxE+/8fxcDACANiA8RQRSVt0ziJnTQMh2zBYD3rzj57KKVgWRbUWtF7N+acQYkQKKLkgpt74nA/m8fMiDEaqwgSM+j1AF+OqNcTBl1e1xUarEP8owZyYYzjiPnt8WkdIgIiQgjB5vWAcw6T92D1947Be4/ZT6AY7XJKyRa1Wmv2vZZUsYC/rr1y2zYkIuyqieALU8nk+xeVq2wAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/56ba12e86283e5cf95d90cf8182f9291/a59e9/supabase-table-rls-disabled.webp 192w,\n/static/56ba12e86283e5cf95d90cf8182f9291/0ca9f/supabase-table-rls-disabled.webp 384w,\n/static/56ba12e86283e5cf95d90cf8182f9291/dc9b9/supabase-table-rls-disabled.webp 768w,\n/static/56ba12e86283e5cf95d90cf8182f9291/e2c2f/supabase-table-rls-disabled.webp 1152w,\n/static/56ba12e86283e5cf95d90cf8182f9291/f3efb/supabase-table-rls-disabled.webp 1536w,\n/static/56ba12e86283e5cf95d90cf8182f9291/9620e/supabase-table-rls-disabled.webp 2186w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/56ba12e86283e5cf95d90cf8182f9291/3b721/supabase-table-rls-disabled.png 192w,\n/static/56ba12e86283e5cf95d90cf8182f9291/66595/supabase-table-rls-disabled.png 384w,\n/static/56ba12e86283e5cf95d90cf8182f9291/fe486/supabase-table-rls-disabled.png 768w,\n/static/56ba12e86283e5cf95d90cf8182f9291/d2d74/supabase-table-rls-disabled.png 1152w,\n/static/56ba12e86283e5cf95d90cf8182f9291/e8464/supabase-table-rls-disabled.png 1536w,\n/static/56ba12e86283e5cf95d90cf8182f9291/3fbc1/supabase-table-rls-disabled.png 2186w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/56ba12e86283e5cf95d90cf8182f9291/fe486/supabase-table-rls-disabled.png\"\n            alt=\"supabase table rls disabled\"\n            title=\"supabase table rls disabled\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>이 테이블을 복사한 뒤 RLS를 설정해보려고 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">table</span>\n  tasks_rls <span class=\"token keyword\">as</span>\n<span class=\"token keyword\">select</span>\n  <span class=\"token operator\">*</span>\n<span class=\"token keyword\">from</span>\n  tasks</code></pre></div>\n<p>동일한 테이블을 생성했다.<br>\n그리고 위 스크린샷에 나와있는 <code class=\"language-text\">RLS disabled</code> 버튼을 클릭해주자.<br>\n이후 몇 번의 클릭을 유도하는 모달창들이 뜨는데, 모두 버튼을 클릭하고 나면,<br>\n<code class=\"language-text\">RLS disabled</code> 버튼이 <code class=\"language-text\">Add RLS policy</code>로 변경된다.<br>\n<code class=\"language-text\">Add RLS policy</code>를 클릭해주자.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c1ada88fd71920fd56c017b498efcb4d/ec6be/supabase-rls-create-policy.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAlElEQVQY04WPuQ7CMBQE/f8fR0NFEYnGAewcxEfwEWeQIwXRQIrR6hU7eiuMs9zsgDQdDzuQUiLn/KHe/zDWYq8N5nxibi6IcRxx4cXkHXZ2xBg3QghbVumyLD/IxJSIz5F4l8ReI6SUaKXpuw6tFK1sUVoxTRPOuQPhQimFsq4UIJeC8N5jjNm+qRP23EVHk7+p3TcWuzbufxI8wQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/c1ada88fd71920fd56c017b498efcb4d/a59e9/supabase-rls-create-policy.webp 192w,\n/static/c1ada88fd71920fd56c017b498efcb4d/0ca9f/supabase-rls-create-policy.webp 384w,\n/static/c1ada88fd71920fd56c017b498efcb4d/dc9b9/supabase-rls-create-policy.webp 768w,\n/static/c1ada88fd71920fd56c017b498efcb4d/e2c2f/supabase-rls-create-policy.webp 1152w,\n/static/c1ada88fd71920fd56c017b498efcb4d/f3efb/supabase-rls-create-policy.webp 1536w,\n/static/c1ada88fd71920fd56c017b498efcb4d/b4438/supabase-rls-create-policy.webp 2352w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/c1ada88fd71920fd56c017b498efcb4d/3b721/supabase-rls-create-policy.png 192w,\n/static/c1ada88fd71920fd56c017b498efcb4d/66595/supabase-rls-create-policy.png 384w,\n/static/c1ada88fd71920fd56c017b498efcb4d/fe486/supabase-rls-create-policy.png 768w,\n/static/c1ada88fd71920fd56c017b498efcb4d/d2d74/supabase-rls-create-policy.png 1152w,\n/static/c1ada88fd71920fd56c017b498efcb4d/e8464/supabase-rls-create-policy.png 1536w,\n/static/c1ada88fd71920fd56c017b498efcb4d/ec6be/supabase-rls-create-policy.png 2352w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/c1ada88fd71920fd56c017b498efcb4d/fe486/supabase-rls-create-policy.png\"\n            alt=\"supabase rls create policy\"\n            title=\"supabase rls create policy\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Create policy를 클릭!</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6df42ede7de09f6aa8b4efa02c99eb29/29e0e/supabase-rls-athenticated.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 107.29166666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAABYlAAAWJQFJUiTwAAACYElEQVQ4y5VU2XLiMBD0//9eXpJAAjiYy4ck6/JJb/VgsbBVu7U8dI2xZ1rdMyOypmlwuVzQ1A3qukZVVQKtNZRSaNtWoI3BpSxRVzVCCAghIsYoz957iaZtkZVlidPpJGQEi40x4HuSRhbHCEfizQrN5hNq/QH99Smw2y+Eny3Cfod29X4jPBQHIeWztVZIqZzROwcXAmxdwRU7qLETB+fzWSLzqdBTbXlGxkIqS9JpwzkniYmc0SiFbrfGdNiKKrNZw+2+4fMNYpFjuhwRNytk2+0WBPtIhbTLA2g3Ra2U9LCLHlPUoizlN0tO3/ciJiuKAj95jsPhIAkk4TBITKSeGqPhQkTbzbchaQPrnDjrhwHTNInDzDgH3VpR0C4k/EDbom6BUg1s6KDDJP2jEMY0UNaxNZl5f4N/f0PvLIZxxDAMAhJScVojPtPSPI33/vI3rXZdJxCF9fcKzfoDwyKdCSTkx0RWk7CqEKxFrxshp7qkkA5oXRQqY6CtxThNmOdZesHIE7kB7CdBYipiHgk5lLT0aRMYMyaX5UVeJPmMPDH1jwNRSiN6i94391vEAwm6YY13HtnvKT4jnZrAd30MuC6LTZUk5UBImuqyx6I/8WSHU/RRppxEUNVjm+gqe+zD35AIXehgwigK094mlTyAm/FPhU9Xj4q6Dtd5vA8l2UwX4WVC78N931icMCw3RSy/QpgWmXbzPBfs9/u7QtnD1y1f73spS7/8j97Wy/w/YWtaWO+gwvMGEFTNg16yLFOOAW3ncTwdxWoCrx/Vyl1+xTIHMk+zLPLjcvN7GtAvkVFEgdtL5XIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/6df42ede7de09f6aa8b4efa02c99eb29/a59e9/supabase-rls-athenticated.webp 192w,\n/static/6df42ede7de09f6aa8b4efa02c99eb29/0ca9f/supabase-rls-athenticated.webp 384w,\n/static/6df42ede7de09f6aa8b4efa02c99eb29/dc9b9/supabase-rls-athenticated.webp 768w,\n/static/6df42ede7de09f6aa8b4efa02c99eb29/e2c2f/supabase-rls-athenticated.webp 1152w,\n/static/6df42ede7de09f6aa8b4efa02c99eb29/f3efb/supabase-rls-athenticated.webp 1536w,\n/static/6df42ede7de09f6aa8b4efa02c99eb29/00e2f/supabase-rls-athenticated.webp 2366w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/6df42ede7de09f6aa8b4efa02c99eb29/3b721/supabase-rls-athenticated.png 192w,\n/static/6df42ede7de09f6aa8b4efa02c99eb29/66595/supabase-rls-athenticated.png 384w,\n/static/6df42ede7de09f6aa8b4efa02c99eb29/fe486/supabase-rls-athenticated.png 768w,\n/static/6df42ede7de09f6aa8b4efa02c99eb29/d2d74/supabase-rls-athenticated.png 1152w,\n/static/6df42ede7de09f6aa8b4efa02c99eb29/e8464/supabase-rls-athenticated.png 1536w,\n/static/6df42ede7de09f6aa8b4efa02c99eb29/29e0e/supabase-rls-athenticated.png 2366w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/6df42ede7de09f6aa8b4efa02c99eb29/fe486/supabase-rls-athenticated.png\"\n            alt=\"supabase rls athenticated\"\n            title=\"supabase rls athenticated\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>SELECT를 클릭하면, 기본 Templates로 왼쪽이 채워진다.<br>\n여기서 <code class=\"language-text\">Target Roles</code>에 로그인 된 사용자만 데이터를 제공하기 위해,<br>\nauthenticated를 설정해주었다.</p>\n<p>그리고 확인을 위해, 로그인 컴포넌트를 제거하고, Dropdown내 login 버튼을 추가해주었다.</p>\n<p><img src=\"/52032a90303f5b6cfb56a81349f979cd/after-apply-rls.gif\" alt=\"\"></p>\n<p>로그인 되었을 때만, 데이터가 보이는 것을 확인할 수 있다.</p>\n<br/>\n<h1 id=\"참고자료\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C\" aria-label=\"참고자료 permalink\" class=\"headerElement before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고자료</h1>\n<p><a href=\"https://youtu.be/yZ89etxVBKs?si=72ZKjDEJDUNDp7Ou\" target=\"_blank\" rel=\"nofollow\">Supabase - 인증과 Serverless App 구현하기</a><br>\n<a href=\"https://velog.io/@racoon/supabase-%ED%8F%BC-%EB%AF%B8%EC%B3%A4%EB%8B%A4\" target=\"_blank\" rel=\"nofollow\">supabase 폼 미쳤다</a></p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#row-level-security%EA%B0%80-%EC%99%9C-%ED%95%84%EC%9A%94%ED%95%A0%EA%B9%8C\">Row Level Security가 왜 필요할까?</a></p>\n</li>\n<li>\n<p><a href=\"#row-level-security-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\">Row Level Security 설정하기</a></p>\n<ul>\n<li><a href=\"#1-github%EC%9C%BC%EB%A1%9C-%EB%A1%9C%EA%B7%B8%EC%9D%B8\">1. Github으로 로그인</a></li>\n<li><a href=\"#2-%EA%B0%84%EB%8B%A8%ED%95%9C-%EB%A1%9C%EA%B7%B8%EC%9D%B8-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0\">2. 간단한 로그인 구현하기</a></li>\n<li><a href=\"#3-row-level-security-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0\">3. Row Level Security 적용하기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C\">참고자료</a></p>\n</li>\n</ul>","frontmatter":{"title":"supabase Row Level Security(RLS) 적용하기","summary":"supabase로 로그인 구현하고, RLS를 적용해보자","date":"2024.06.22.","categories":["개발"]}}}]}},"pageContext":{"slug":"/blog/2024/6/22/supabase-rls/"}},"staticQueryHashes":["1629908903"]}