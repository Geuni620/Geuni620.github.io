{"componentChunkName":"component---src-templates-post-template-tsx","path":"/blog/2023/5/19/[NextJS] server-component-type-error/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h3 id=\"async-서버-컴포넌트-promise-type-error\" style=\"position:relative;\"><a href=\"#async-%EC%84%9C%EB%B2%84-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-promise-type-error\" aria-label=\"async 서버 컴포넌트 promise type error permalink\" class=\"headerElement before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Async 서버 컴포넌트 Promise Type Error</h3>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">return</span><span class=\"token punctuation\">(</span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Suspense</span></span> <span class=\"token attr-name\">fallback</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Loading</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CommentSectionStreamer</span></span> <span class=\"token attr-name\">promise</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>commentsList<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Suspense</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>위와 같이 Suspense를 사용해서 Async Server Component를 사용하려고 했다.</p>\n<br>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/790804757dd78ff73ef5424566c594ce/46352/server-components-type-error.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 16.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAtklEQVQI1yXJ0W6CMBhAYd5lydzmYhTa0v5tYQRspSA64/u/ylniLk6+i1ONY6ZPC2NaGNLKkK74IdPYHuU6rA0YGzESOCnDsdH/Ks2h1hyVoVYGrxU77aicdMT1geSVMG/EsuEvK+5ciPONbrm/Xix3vmXgo+1efdmevfthZyKfOtDUhreTpZrzmXLJPLcrz23lt9wo00KaMtMwEUOPawVvheACwXmC9UQJdBIRK/jWobXlXQl/jNBmyggiOngAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/790804757dd78ff73ef5424566c594ce/a59e9/server-components-type-error.webp 192w,\n/static/790804757dd78ff73ef5424566c594ce/0ca9f/server-components-type-error.webp 384w,\n/static/790804757dd78ff73ef5424566c594ce/dc9b9/server-components-type-error.webp 768w,\n/static/790804757dd78ff73ef5424566c594ce/e2c2f/server-components-type-error.webp 1152w,\n/static/790804757dd78ff73ef5424566c594ce/f3efb/server-components-type-error.webp 1536w,\n/static/790804757dd78ff73ef5424566c594ce/6a898/server-components-type-error.webp 1542w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/790804757dd78ff73ef5424566c594ce/3b721/server-components-type-error.png 192w,\n/static/790804757dd78ff73ef5424566c594ce/66595/server-components-type-error.png 384w,\n/static/790804757dd78ff73ef5424566c594ce/fe486/server-components-type-error.png 768w,\n/static/790804757dd78ff73ef5424566c594ce/d2d74/server-components-type-error.png 1152w,\n/static/790804757dd78ff73ef5424566c594ce/e8464/server-components-type-error.png 1536w,\n/static/790804757dd78ff73ef5424566c594ce/46352/server-components-type-error.png 1542w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/790804757dd78ff73ef5424566c594ce/fe486/server-components-type-error.png\"\n            alt=\"server component type error\"\n            title=\"server component type error\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">server component type error</figcaption>\n  </figure>\n해당 부분은 아직 Typescript에 반영되지 않은 듯 하다.</p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Async Server Component TypeScript Error\n\n- An async Server Components will cause a 'Promise&lt;Element>' is not a valid JSX element type error where it is used.\nThis is a known issue with TypeScript and is being worked on upstream.\n- As a temporary workaround, you can add {/* @ts-expect-error Async Server Component */} above the component to disable type checking for it.</code></pre></div>\n<p>공식문서에서도 다음과 같이 확인할 수 있다.</p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">return</span><span class=\"token punctuation\">(</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Suspense</span></span> <span class=\"token attr-name\">fallback</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Loading</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token punctuation\">{</span><span class=\"token comment\">/* @ts-expect-error Async Server Component */</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CommentSectionStreamer</span></span> <span class=\"token attr-name\">promise</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>commentsList<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Suspense</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>그래서 이렇게 주석을 추가해주었다.</p>\n<br>\n<hr>\n<h3 id=\"typescript-jsx-태그-타입-별도-구분\" style=\"position:relative;\"><a href=\"#typescript-jsx-%ED%83%9C%EA%B7%B8-%ED%83%80%EC%9E%85-%EB%B3%84%EB%8F%84-%EA%B5%AC%EB%B6%84\" aria-label=\"typescript jsx 태그 타입 별도 구분 permalink\" class=\"headerElement before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Typescript JSX 태그 타입 별도 구분</h3>\n<p>Typescript 5.1버전으로 업데이트 되면서 서버컴포넌트에서 <a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-5-1.html#decoupled-type-checking-between-jsx-elements-and-jsx-tag-types\" target=\"_blank\" rel=\"nofollow\">Promise를 반환하는 경우에 대한 타입을 별도로 추가되었다.</a></p>\n<p>사용방법을 몰라 조금 헤맸는데, 아주 간단하다.<br>\nnext.js에서도 기존에 대안방법이라고 제시하던 위 링크의 내용이 수정되었다.<br>\n<a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-5-1.html#decoupled-type-checking-between-jsx-elements-and-jsx-tag-types\" target=\"_blank\" rel=\"nofollow\">next.js 공식문서의 내용</a>을 살펴보면,</p>\n<ol>\n<li>Typescript의 버전을 5.1.3이상으로 올리기</li>\n<li>@types/react의 버전을 18.2.8이상으로 올리기</li>\n</ol>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install @types/react@latest typescript@latest</code></pre></div>\n<br>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9a836642fad3a7b187f2d7683cd5f1b1/eb638/solve-server-components-type-error.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.604166666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABLklEQVQY02XQ23KiQBSFYR8lGaUkRgS6Q3dDHyRK8IQGxmTe/03+qaCpmtRcrFq1b77ae09WpSfsjsiqobANIrSI1yMr15L6PXl9InNbrPEI7SkKR6IDkSyJhPkvk5dNy9vvC+37me46sHs/c7oObC8DRagxmw2qrlm/eqT1xKJkfsdmuf7RI5jahqzcIe2e3B1IQscqdCTuwKJsWVQtM1nxkCqmmWb2BYhvQN/yA9SWnVrjTCASirk0LFQ1JlaOSNr7BnqEppliln0D/55djm+YuH1H/+eT/rPnfO25fAzU2w0u1Mh1Q2rXPBtHLC3P0rM0X3NgmhU8LnMek/zeYuzJse/oPgZ0c0JvD5i3E7F0RGlFXFiWxvOkLHNR8SQcC+2Jlb2BieBXIm/YPX8BJSHE4wteZKgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/9a836642fad3a7b187f2d7683cd5f1b1/a59e9/solve-server-components-type-error.webp 192w,\n/static/9a836642fad3a7b187f2d7683cd5f1b1/0ca9f/solve-server-components-type-error.webp 384w,\n/static/9a836642fad3a7b187f2d7683cd5f1b1/dc9b9/solve-server-components-type-error.webp 768w,\n/static/9a836642fad3a7b187f2d7683cd5f1b1/e2c2f/solve-server-components-type-error.webp 1152w,\n/static/9a836642fad3a7b187f2d7683cd5f1b1/5f780/solve-server-components-type-error.webp 1422w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/9a836642fad3a7b187f2d7683cd5f1b1/3b721/solve-server-components-type-error.png 192w,\n/static/9a836642fad3a7b187f2d7683cd5f1b1/66595/solve-server-components-type-error.png 384w,\n/static/9a836642fad3a7b187f2d7683cd5f1b1/fe486/solve-server-components-type-error.png 768w,\n/static/9a836642fad3a7b187f2d7683cd5f1b1/d2d74/solve-server-components-type-error.png 1152w,\n/static/9a836642fad3a7b187f2d7683cd5f1b1/eb638/solve-server-components-type-error.png 1422w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/9a836642fad3a7b187f2d7683cd5f1b1/fe486/solve-server-components-type-error.png\"\n            alt=\"더 이상 에러가 뜨지 않는다.\"\n            title=\"더 이상 에러가 뜨지 않는다.\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">더 이상 에러가 뜨지 않는다.</figcaption>\n  </figure></p>\n<h3 id=\"참고자료\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C\" aria-label=\"참고자료 permalink\" class=\"headerElement before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고자료</h3>\n<p><a href=\"https://nextjs.org/docs/app/building-your-application/data-fetching/fetching#async-and-await-in-server-components\" target=\"_blank\" rel=\"nofollow\">async and await in Server Components</a></p>\n<p><a href=\"https://curryyou.tistory.com/529\" target=\"_blank\" rel=\"nofollow\"># Async 서버 컴포넌트 Promise 반환 이슈</a></p>\n<hr>\n<p><a href=\"https://velog.io/@reum107/what-changes-in-typescript-5.1\" target=\"_blank\" rel=\"nofollow\">TypeScript 5.1에서 변경된 점은 무엇일까요?</a></p>\n<p><a href=\"https://nextjs.org/docs/app/building-your-application/configuring/typescript#async-server-component-typescript-error\" target=\"_blank\" rel=\"nofollow\">Async Server Component TypeScript Error</a></p>","tableOfContents":"<ul>\n<li><a href=\"#async-%EC%84%9C%EB%B2%84-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-promise-type-error\">Async 서버 컴포넌트 Promise Type Error</a></li>\n<li><a href=\"#typescript-jsx-%ED%83%9C%EA%B7%B8-%ED%83%80%EC%9E%85-%EB%B3%84%EB%8F%84-%EA%B5%AC%EB%B6%84\">Typescript JSX 태그 타입 별도 구분</a></li>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C\">참고자료</a></li>\n</ul>","frontmatter":{"title":"[NextJS] Async Server Component TypeScript Error 해결하기","summary":"\"components는 JSX 구성 요소로 사용할 수 없습니다.\" typeError 해결하기","date":"2023.05.19.","categories":["개발"]}}}]}},"pageContext":{"slug":"/blog/2023/5/19/[NextJS] server-component-type-error/"}},"staticQueryHashes":["1629908903"]}