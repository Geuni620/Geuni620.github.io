---
date: '2024-12-29'
title: 'async와 defer의 차이가 뭔가요?'
categories: ['개발']
summary: ''
---

> 최근 받게 된 질문이다.  
> 우연히 읽었던 글을 통해, 내 답변이 틀린 것을 알게 되었다.

async와 defer에 관련된 글은 차고 넘친다.  
해당 글보다 내가 설명을 잘 적을 자신이 없다.  
내가 이 글에서 말하고자하는 점은, **단지 나의 답변이 잘못되었음을 기록**해둔다.

<br/>

## 1. async와 defer의 차이가 뭔가요?

브라우저렌더링 과정에서 script의 실행시점을 조절할 수 있다.  
예를 들면, 다음과 같은 스크립트문이 있다.

```JS
<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <script>
    // 3초 이상 대기시간이 걸리는 소스코드
    </script>
    <main>
    //...
    </main>
  </body>
</html>
```

렌더링 엔진이 HTML을 한 줄씩 순차적으로 파싱하여 DOM을 생성해나가다가,  
 **자바스크립트 파일을 로드하는 script태그나 자바스크립트 코드를 콘텐츠로 담은 script 태그를 만나면 DOM 생성을 일시중단**한다.

script태그의 src 어트리뷰트에 정의된 자바스크립트 파일을 서버에 요청하여 로드한 자바스크립트 파일이나 script 태그 내의 자바스크립트 코드를 파싱하기 위해 (렌더링 엔진이) 자바스크립트 엔진에 제어권을 넘긴다.

이후 자바스크립트 파싱과 실행이 종료되면 렌더링 엔진으로 다시 제어권을 넘겨 HTML 파싱이 중단된 지점부터 다시 HTML 파싱을 시작하여 DOM 생성을 재개한다.

<br/>

### 1-1 DOM 생성은 꼭 중단되어야할까?

꼭 중단될 필요는 없다.  
동시에 진행은 불가능하다.

어떤 script인가에 따라 다르겠지만, DOM생성에 영향을 주지 않은 채, 비동기적으로 script를 실행하면 된다.  
이때 필요한게 async와 defer이다.

async와 defer는 **둘다 비동기적으로 동시에 진행**된다.  
단, 둘의 차이는 자바스크립트의 실행 시점의 차이가 있다.
