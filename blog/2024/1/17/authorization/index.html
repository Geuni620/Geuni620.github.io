<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.25.3"/><meta data-react-helmet="true" name="description" content="í† í°ì„ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ì§€ ì•Šê³  ì¸ì¦ ë° ì¸ê°€ ì²˜ë¦¬ êµ¬í˜„í•˜ê¸°"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1.0"/><meta data-react-helmet="true" http-equiv="Content-Type" content="text/html;charset=UTF-8"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:title" content="next-authë¥¼ í™œìš©í•œ ì¸ì¦ ë° ì¸ê°€ ì´í•´í•˜ê¸°"/><meta data-react-helmet="true" property="og:description" content="í† í°ì„ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ì§€ ì•Šê³  ì¸ì¦ ë° ì¸ê°€ ì²˜ë¦¬ êµ¬í˜„í•˜ê¸°"/><meta data-react-helmet="true" property="og:image"/><meta data-react-helmet="true" property="og:url"/><meta data-react-helmet="true" property="og:site_name" content="next-authë¥¼ í™œìš©í•œ ì¸ì¦ ë° ì¸ê°€ ì´í•´í•˜ê¸°"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:title" content="next-authë¥¼ í™œìš©í•œ ì¸ì¦ ë° ì¸ê°€ ì´í•´í•˜ê¸°"/><meta data-react-helmet="true" name="twitter:description" content="í† í°ì„ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ì§€ ì•Šê³  ì¸ì¦ ë° ì¸ê°€ ì²˜ë¦¬ êµ¬í˜„í•˜ê¸°"/><meta data-react-helmet="true" name="twitter:image"/><meta data-react-helmet="true" name="twitter:site" content="@Geuni620"/><meta data-react-helmet="true" name="twitter:creator" content="@Geuni620"/><meta data-react-helmet="true" name="google-site-verification" content="bHJqVdOg6rrFDK-dWGOElA4Egv3IPQlc-COuY76j678"/><meta data-react-helmet="true" name="naver-site-verification" content="1c3c437586a7b1a24609a56a8bf7adbb6ba019c2"/><meta data-react-helmet="true" name="msapplication-TileColor" content="#da532c"/><meta data-react-helmet="true" name="theme-color" content="#ffffff"/><meta data-react-helmet="true" name="google-adsense-account" content="ca-pub-9901489090188954"/><meta name="google-adsense-account" content="ca-pub-9901489090188954"/><style data-href="/styles.710ba525502dd431a17c.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#000;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;-o-tab-size:4;tab-size:4;text-align:left;text-shadow:0 1px #fff;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#b3d4fc;text-shadow:none}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:hsla(0,0%,100%,.5);color:#9a6e3a}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-XWJMDQNM9B"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-XWJMDQNM9B', {"send_page_view":false});
      }
      </script><link rel="canonical" href="https://geuni620.github.io/blog/2024/1/17/authorization/" data-baseprotocol="https:" data-basehost="geuni620.github.io"/><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><title data-react-helmet="true">next-authë¥¼ í™œìš©í•œ ì¸ì¦ ë° ì¸ê°€ ì´í•´í•˜ê¸°</title><link data-react-helmet="true" rel="apple-touch-icon" sizes="180x180" href="assets/favicon/apple-touch-icon.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="32x32" href="assets/favicon/favicon-32x32.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="16x16" href="assets/favicon/favicon-16x16.png"/><link data-react-helmet="true" rel="manifest" href="assets/favicon/site.webmanifest"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><style type="text/css">
    .headerElement.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .headerElement.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .headerElement svg,
    h2 .headerElement svg,
    h3 .headerElement svg,
    h4 .headerElement svg,
    h5 .headerElement svg,
    h6 .headerElement svg {
      visibility: hidden;
    }
    h1:hover .headerElement svg,
    h2:hover .headerElement svg,
    h3:hover .headerElement svg,
    h4:hover .headerElement svg,
    h5:hover .headerElement svg,
    h6:hover .headerElement svg,
    h1 .headerElement:focus svg,
    h2 .headerElement:focus svg,
    h3 .headerElement:focus svg,
    h4 .headerElement:focus svg,
    h5 .headerElement:focus svg,
    h6 .headerElement:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css 17q84ie">.css-17q84ie{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;}@media (max-width: 768px){.css-17q84ie{width:90%;margin:0 auto;}}</style><main class="css-17q84ie e1strnqo0"><style data-emotion="css-global 16rkkz4">@import url('<https://fonts.googleapis.com/css2?family=Nanum+Myeongjo:wght@400;700;800&display=swap>');*{padding:0;margin:0;box-sizing:border-box;font-family:'Jua',sans-serif;}html,body,#___gatsby{height:100%;}a,a:hover{color:inherit;-webkit-text-decoration:none;text-decoration:none;cursor:pointer;}</style><style data-emotion="css kxznun">.css-kxznun{position:fixed;width:100%;top:0px;left:0;color:#ffffff;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);box-shadow:rgb(0 0 0 / 8%) 0px 0px 8px;opacity:1;-webkit-transition:top 0.5s ease 0s,opacity 0.5s ease 0s;transition:top 0.5s ease 0s,opacity 0.5s ease 0s;z-index:999;}</style><header class="css-kxznun e7v9byn3"><style data-emotion="css rwmuo">.css-rwmuo{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:0 auto;padding:10px 60px;}@media (max-width: 768px){.css-rwmuo{padding:10px 20px;}}</style><div class="css-rwmuo e7v9byn2"><a href="/"><style data-emotion="css chhkyo">.css-chhkyo{width:50px;height:50px;padding:5px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;border-radius:50%;isolation:isolate;}</style><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained css-chhkyo e1n1u3tj0"><div style="max-width:120px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;120&#x27; width=&#x27;120&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear" decoding="async" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC0ElEQVQ4y3XQOY/bRhTA8fk6qVO5TJkyadzGhQFXMYwcRQpL5urelcjhfYjHkOI15PCU5F0du/loxsxItmDAwMN088P/PTDV86mOJ1ox0fBYLcZqMVLykZLfyZkAMwHm/P0EkyGMB1I0lOKhGA/E+KMYgrlZzIxyZhQznTAlZ5OOVTojJb2TEzaZAFMBbgSYDqVsKKVDKQULu5ibZG4Wc6uYmXhm4JmRT/V8ouGJlo01TiQjhb6CEt/JMWvJPsEUPKzLB6e8d4qFgxc2nlt4ZuK5eSX0bKJlPIcqHJITQU4FJQMrr1q6ZLmm/++d4mFd3DvlwsYLO2cb4amRc2jK/l/WUZORlgDo1SuvktYE+o0S9QPRHyzdpUtoi40XFp4zhUPU0vlRsomWAtlvNNSPYfj67T/LdfnnYPXu34mdH1hFyUIKBhUUsvCtAtSg1VH/YOG/BfnN+8FPr379+Zff/puZS4/Qddgwpbwq304DjKhXUWdEvRb2fw2k3/94/+Gj+GEoLV0i+rXoVyuvutzlRuEEMDc7I9wa0Ra6BK6Jkz4a8U5P9hC1UtBIfgP9WvJq0a+/EhfFKYGd7K14Z8ZbK97ZyV4POz3s1KBVUaeiDqJWCVrFb2SfQqJXi+zAoktWLgFO+tlO9pxgys7cbI2oN6Jej3o17OigjhIBawloC6RKBdbZ4zp7dNLPfKhyhawrpIedFnZK2MqogaiRGSEFDfDwwc2f+NxCtznGZmtutjo9Kg2RUQtRKwcNCMqjX1zmR5CV7M2vITcKQOQYlMegPAXl6aocPPzk5ofviMtSLIRfBITVOaxOITmF5BgQSgQ/CLn9zwkQ189xdY6r86Y6RZQ4IXJGNyEe5iHfE3ayB2nzkjYvSf28aZ7jmitnqpQnREOOQXkIigPbhS/yjQBZ+5K2/2eMiJlC/9fnqDpvCG1B5BiWR1Qe/JITTx7mt9h/AXx87LWuwqpGAAAAAElFTkSuQmCC" alt=""/><picture><source type="image/webp" data-srcset="/static/da11a08871bbdad7fcdece0ebc7459ce/2b147/profile-image.webp 30w,/static/da11a08871bbdad7fcdece0ebc7459ce/caa3b/profile-image.webp 60w,/static/da11a08871bbdad7fcdece0ebc7459ce/b15f9/profile-image.webp 120w,/static/da11a08871bbdad7fcdece0ebc7459ce/b5014/profile-image.webp 240w" sizes="(min-width: 120px) 120px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 120px) 120px, 100vw" decoding="async" loading="lazy" data-src="/static/da11a08871bbdad7fcdece0ebc7459ce/bbf83/profile-image.jpg" data-srcset="/static/da11a08871bbdad7fcdece0ebc7459ce/a8e5a/profile-image.jpg 30w,/static/da11a08871bbdad7fcdece0ebc7459ce/bea51/profile-image.jpg 60w,/static/da11a08871bbdad7fcdece0ebc7459ce/bbf83/profile-image.jpg 120w,/static/da11a08871bbdad7fcdece0ebc7459ce/7793c/profile-image.jpg 240w" alt="Profile Image"/></picture><noscript><picture><source type="image/webp" srcSet="/static/da11a08871bbdad7fcdece0ebc7459ce/2b147/profile-image.webp 30w,/static/da11a08871bbdad7fcdece0ebc7459ce/caa3b/profile-image.webp 60w,/static/da11a08871bbdad7fcdece0ebc7459ce/b15f9/profile-image.webp 120w,/static/da11a08871bbdad7fcdece0ebc7459ce/b5014/profile-image.webp 240w" sizes="(min-width: 120px) 120px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 120px) 120px, 100vw" decoding="async" loading="lazy" src="/static/da11a08871bbdad7fcdece0ebc7459ce/bbf83/profile-image.jpg" srcSet="/static/da11a08871bbdad7fcdece0ebc7459ce/a8e5a/profile-image.jpg 30w,/static/da11a08871bbdad7fcdece0ebc7459ce/bea51/profile-image.jpg 60w,/static/da11a08871bbdad7fcdece0ebc7459ce/bbf83/profile-image.jpg 120w,/static/da11a08871bbdad7fcdece0ebc7459ce/7793c/profile-image.jpg 240w" alt="Profile Image"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></a><style data-emotion="css 129macj">.css-129macj{position:absolute;top:2rem;left:7rem;padding:0.5rem 1rem;background-color:white;border-radius:0.5rem;box-shadow:0 8px 16px rgba(0, 0, 0, 0.1);-webkit-animation:float 2s ease-in-out infinite;animation:float 2s ease-in-out infinite;}.css-129macj::before{content:'';position:absolute;left:-8px;top:20%;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);border:4px solid transparent;border-right-color:white;rotate:10deg;}@-webkit-keyframes float{0%,100%{-webkit-transform:translateY(0);-moz-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0);}50%{-webkit-transform:translateY(-4px);-moz-transform:translateY(-4px);-ms-transform:translateY(-4px);transform:translateY(-4px);}}@keyframes float{0%,100%{-webkit-transform:translateY(0);-moz-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0);}50%{-webkit-transform:translateY(-4px);-moz-transform:translateY(-4px);-ms-transform:translateY(-4px);transform:translateY(-4px);}}@media (max-width: 768px){.css-129macj{left:4.5rem;}}</style><div class="css-129macj e7v9byn1"><style data-emotion="css 11cmwhy">.css-11cmwhy{display:block;margin-top:0.25rem;font-size:0.75rem;color:#3182ce;-webkit-text-decoration:none;text-decoration:none;-webkit-transition:color 0.2s;transition:color 0.2s;}.css-11cmwhy:hover{color:#2c5282;}</style><a href="https://www.geuni.me/" target="_blank" class="css-11cmwhy e7v9byn0">ë¸”ë¡œê·¸ë¥¼ ì˜®ê²¼ì–´ìš”.</a></div></div></header><style data-emotion="css 1xpwfc9">.css-1xpwfc9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}</style><div class="css-1xpwfc9 e6b6ljm1"><style data-emotion="css 1vsj6bx">@media (max-width: 768px){.css-1vsj6bx{width:100%;}}</style><div class="css-1vsj6bx e6b6ljm0"><style data-emotion="css pw7jst">.css-pw7jst{position:relative;width:100%;}</style><div class="css-pw7jst e1opi4mu0"><style data-emotion="css 16n2vrb">.css-16n2vrb{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:768px;margin:0 auto;padding:100px 0px 60px 0px;color:#ffffff;}@media (max-width: 768px){.css-16n2vrb{width:100%;}}</style><div class="css-16n2vrb e1st1jau2"><style data-emotion="css 1qqkx4z">.css-1qqkx4z{margin-top:20px;color:black;font-size:45px;font-weight:800;}@media (max-width: 768px){.css-1qqkx4z{font-size:28px;}}</style><div class="css-1qqkx4z e1st1jau1">next-authë¥¼ í™œìš©í•œ ì¸ì¦ ë° ì¸ê°€ ì´í•´í•˜ê¸°</div><style data-emotion="css vpbqf9">.css-vpbqf9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:black;margin-top:10px;font-size:18px;font-weight:700;}</style><div class="css-vpbqf9 e1st1jau0"><div>ê°œë°œ</div><div>2024.01.21.</div></div></div></div><style data-emotion="css u9yaza">.css-u9yaza{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:768px;margin:0 auto;padding-bottom:50px;word-break:break-all;font-size:18px;font-weight:400;}.css-u9yaza p{padding:3px 0;margin-bottom:1.5rem;line-height:1.6em;}.css-u9yaza h1,.css-u9yaza h2,.css-u9yaza h3{font-weight:800;margin-bottom:1.5rem;}.css-u9yaza *+h1,.css-u9yaza *+h2,.css-u9yaza *+h3{margin-top:0.5rem;}.css-u9yaza hr+h1,.css-u9yaza hr+h2,.css-u9yaza hr+h3{margin-top:0;}.css-u9yaza h1{font-size:50px;}.css-u9yaza h2{font-size:40px;}.css-u9yaza h3{font-size:30px;}.css-u9yaza blockquote{padding:20px;border-left:5px solid #a3aaae;font-weight:400;font-style:normal;line-height:28px;font-size:18px;color:#000;background-color:#f7f7f7;margin-bottom:1.5rem;}.css-u9yaza blockquote p{margin:10px 0;}.css-u9yaza ol,.css-u9yaza ul{margin-bottom:1.5rem;margin-left:20px;}.css-u9yaza ul>li:has(input[type='checkbox']){list-style:none;}.css-u9yaza .contains-task-list{margin-left:0;}.css-u9yaza li{margin-bottom:0.5em;}.css-u9yaza hr{border:1px solid rgb(233, 236, 239);margin-bottom:48px;}.css-u9yaza a{color:#0687f0;font-weight:500;-webkit-transition:all 0.3s ease-in-out;transition:all 0.3s ease-in-out;}.css-u9yaza a:hover{-webkit-text-decoration:underline;text-decoration:underline;}.css-u9yaza pre[class*='language-']{margin:0 0 30px 0;padding:15px;font-size:15px;}.css-u9yaza code[class*='language-'],.css-u9yaza pre[class*='language-']{tab-size:2;font-size:14px;}.css-u9yaza li code,.css-u9yaza p code{color:#eb5757;background-color:hsla(44, 6%, 50%, 0.15);}.css-u9yaza figcaption{font-size:14px;margin-top:5px;text-align:center;color:#888;}.css-u9yaza p strong{font-weight:700;}.css-u9yaza input[type='checkbox']{width:18px;height:18px;vertical-align:middle;margin-right:5px;}@media (max-width: 768px){.css-u9yaza{width:100%;line-height:1.6;font-size:14px;}.css-u9yaza h1{font-size:23px;}.css-u9yaza h2{font-size:20px;}.css-u9yaza h3{font-size:17px;}.css-u9yaza img{width:100%;}.css-u9yaza hr{margin:50px 0;}}</style><div class="css-u9yaza e1ijh0y10"><ul>
<li>ì‘ì„±í–ˆë˜ ê´€ë ¨ ê¸€<br>
<a href="https://geuni620.github.io/blog/2023/8/18/next-auth/" target="_blank" rel="nofollow">next-auth token ê´€ë¦¬í•˜ê¸°-1</a><br>
<a href="https://geuni620.github.io/blog/2023/8/24/next-auth/" target="_blank" rel="nofollow">next-auth token ê´€ë¦¬í•˜ê¸°-2</a><br>
<a href="https://geuni620.github.io/blog/2023/8/28/next-auth/" target="_blank" rel="nofollow">next-auth token ê´€ë¦¬í•˜ê¸°-3</a><br>
<a href="https://geuni620.github.io/blog/2023/9/10/next-auth/" target="_blank" rel="nofollow">next-auth token ê´€ë¦¬í•˜ê¸°-4</a></li>
</ul>
<br/>
<h1 id="1-tokenì˜-í•„ìš”ì„±" style="position:relative;"><a href="#1-token%EC%9D%98-%ED%95%84%EC%9A%94%EC%84%B1" aria-label="1 tokenì˜ í•„ìš”ì„± permalink" class="headerElement before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. Tokenì˜ í•„ìš”ì„±</h1>
<p>ì‚¬ì´ë“œí”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë‹¤ê°€ ì˜ë¬¸ì ì´ í•˜ë‚˜ ìƒê²¼ë‹¤.<br>
next-authë¥¼ ì‚¬ìš©í•´ ë¡œê·¸ì¸ì„ í–ˆëŠ”ë°(=ì¸ì¦),<br>
<strong>APIìš”ì²­ì‹œ Tokenì„ headerì— í¬í•¨ì‹œì¼œì„œ ìš”ì²­ì„ ë³´ë‚´ì§€ ì•ŠëŠ”ë‹¤.</strong>(=ì¸ê°€)</p>
<p>ìš”ì²­ì„ ë³´ë‚¼ ë•Œ ìœ ì €ë¥¼ êµ¬ë¶„í•˜ëŠ” ê¸°ì¤€ì´ <code class="language-text">userId</code>ì´ë‹¤.<br>
<strong>ì¦‰, Tokenì„ ì „í˜€ ì‚¬ìš©í•˜ê³  ìˆì§€ ì•Šë‹¤.</strong></p>
<br/>
<p>ë¨¸ë¦¬ì†ì— ì˜ë¬¸ì ì´ ë– ì˜¬ëë‹¤.</p>
<blockquote>
<p>ğŸ’¬ userIdë¥¼ ë‹¤ë¥¸ ì‚¬ìš©ìê°€ ì•Œê³  ìˆë‹¤ë©´, postmanì´ë‚˜, thunder-clientë¡œ DB ë°ì´í„°ë¥¼ êº¼ë‚´ì˜¤ê±°ë‚˜,<br>
ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” ê±° ì•„ë‹Œê°€? ì‹¬ì§€ì–´ ì‚­ì œê¹Œì§€.</p>
</blockquote>
<p>ê·¸ë˜ì„œ í™•ì¸í•´ë³´ê³  ì‹¶ì–´ì¡Œë‹¤. ê³¼ì—°, userIdë¥¼ ì•Œê³  ìˆë‹¤ë©´ DBì— ë°ì´í„°ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆì„ê¹Œ?</p>
<p><figure class="gatsby-resp-image-figure" style="">
    <span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/f58547be52f058831a14fd4aef3010b4/3f8e8/thuner-client.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 37.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABXElEQVQoz22R2W7bMBBF9SupNrtBHK1cRIm0KMtxEjgv/f9vOQUpIW6LPlxyBrxzcAdMTuaMvLzT+xtiuaGvnzTnlbxRHOWEfL9zlCOdW/lpDZmRhJmjHSgHHetiUGSNJKslyaE3cbDsBqpp4WTmWB/FRHgrWh17dfmgmnyEl/1I3htKYTiI0A9bADGShKNoh6g8DhvK/qHtXfP0KmjMgLtYGj0i1UjZKNJKkNcyAp/lRBIiHzpN2SryelNWbfGLYFIhvSarFb2dIlDOjuW60FlL0ekIC/64srCG+5fHf3jc18r860Z9djtkB7cbcPIT/uoYlhl584g3T+3sNzDcyUkbhB15GSfa5YxYZ561IW8fpgBMa8VytXzeZ8wyI7yj8Y6y19++mDCtJU+vkrSS/DiJqHRf+U9g1iiqweBWixwnFut46Ybo/Sth3mzF//QAqvhh8fP2vtyV/TPzG1YSAlFSNOw+AAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/f58547be52f058831a14fd4aef3010b4/a59e9/thuner-client.webp 192w,
/static/f58547be52f058831a14fd4aef3010b4/0ca9f/thuner-client.webp 384w,
/static/f58547be52f058831a14fd4aef3010b4/dc9b9/thuner-client.webp 768w,
/static/f58547be52f058831a14fd4aef3010b4/e2c2f/thuner-client.webp 1152w,
/static/f58547be52f058831a14fd4aef3010b4/f3efb/thuner-client.webp 1536w,
/static/f58547be52f058831a14fd4aef3010b4/4c6e1/thuner-client.webp 1976w"
              sizes="(max-width: 768px) 100vw, 768px"
              type="image/webp"
            />
          <source
            srcset="/static/f58547be52f058831a14fd4aef3010b4/3b721/thuner-client.png 192w,
/static/f58547be52f058831a14fd4aef3010b4/66595/thuner-client.png 384w,
/static/f58547be52f058831a14fd4aef3010b4/fe486/thuner-client.png 768w,
/static/f58547be52f058831a14fd4aef3010b4/d2d74/thuner-client.png 1152w,
/static/f58547be52f058831a14fd4aef3010b4/e8464/thuner-client.png 1536w,
/static/f58547be52f058831a14fd4aef3010b4/3f8e8/thuner-client.png 1976w"
            sizes="(max-width: 768px) 100vw, 768px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/f58547be52f058831a14fd4aef3010b4/fe486/thuner-client.png"
            alt="í°ì¼ì´ë‹¤;"
            title="í°ì¼ì´ë‹¤;"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span>
    <figcaption class="gatsby-resp-image-figcaption">í°ì¼ì´ë‹¤;</figcaption>
  </figure></p>
<p>ìœ„ ì´ë¯¸ì§€ì²˜ëŸ¼ vercelë¡œ ì„ì‹œ ë°°í¬í•œ ìƒíƒœë¡œ thunder-clientì— ë°ì´í„°ë¥¼ ìš”ì²­í•´ë´¤ë‹¤.<br>
<code class="language-text">userId</code>ì™€ <code class="language-text">recipientId</code>ëŠ” ì‚¬ìš©ìê°€ ë‹¤ë¥¸ì‚¬ëŒì—ê²Œ ê³µìœ í•˜ê¸° ìœ„í•´, ë…¸ì¶œë˜ëŠ” ë¶€ë¶„ì´ë‹¤.<br>
ì¦‰, ëˆ„êµ¬ë‚˜ ì‰½ê²Œ í™•ì¸ ê°€ëŠ¥í•˜ë‹¤.</p>
<p>ê·¸ë ‡ë‹¤ë©´ <code class="language-text">userId</code>ë‚˜, <code class="language-text">recipientId</code>ë§Œ ì•Œê³  ìˆë‹¤ë©´ ëˆ„êµ¬ë‚˜ DB ë°ì´í„°ë¥¼ ìš”ì²­í•  ìˆ˜ ìˆê³ , ì‚­ì œë„ ê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì´ë‹¤. ë§Œì•½ DBì˜ ë°ì´í„°ë¥¼ ë³´í˜¸í•´ì•¼í•œë‹¤ë©´, <code class="language-text">userId</code>ë§Œìœ¼ë¡œ ì„œë²„ ë°ì´í„°ë¥¼ ë°˜í™˜í•˜ê¸°ì—” ë¬´ë¦¬ê°€ ìˆë‹¤ê³  ìƒê°ë˜ì—ˆë‹¤.</p>
<p><strong>ì´ë•Œ Tokenì´ í•„ìš”í•˜ë‹¤.</strong></p>
<blockquote>
<p>ì°¸ê³ ë¡œ ê¸°íš íŠ¹ì„±ìƒ, ì‚¬ì´ë“œí”„ë¡œì íŠ¸ì—ì„  Tokenì´ í•„ìš”í•˜ì§€ ì•Šë‹¤. ìµëª…ìœ¼ë¡œ ëˆ„êµ¬ë‚˜ ê¸€ì„ ì“¸ ìˆ˜ ìˆë„ë¡ í–ˆê³ , Delete APIëŠ” ì¡´ì¬í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì´ë‹¤.</p>
</blockquote>
<br/>
<h1 id="2-next-auth-token-ê´€ë¦¬-ë°©ë²•" style="position:relative;"><a href="#2-next-auth-token-%EA%B4%80%EB%A6%AC-%EB%B0%A9%EB%B2%95" aria-label="2 next auth token ê´€ë¦¬ ë°©ë²• permalink" class="headerElement before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. next-auth Token ê´€ë¦¬ ë°©ë²•</h1>
<p>next-authì˜ tokenì„ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì.<br>
next-authì—ì„  í¬ê²Œ Tokenì„ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì„ <a href="https://next-auth.js.org/getting-started/upgrade-v4#session-strategy" target="_blank" rel="nofollow">2ê°€ì§€</a> ì†Œê°œí•œë‹¤.<br>
ì²«ë²ˆì§¸ëŠ”, <strong>JWTë¡œ ê´€ë¦¬í•˜ëŠ” ë°©ë²•</strong>ì´ê³ , ë‘ ë²ˆì§¸ëŠ” <strong>DBì—ì„œ ê´€ë¦¬í•˜ëŠ” ë°©ë²•</strong>ì´ë‹¤.</p>
<p>ì´ì „ ê¸€ì„ ì“¸ ë‹¹ì‹œì—”, <strong>DBì— token ì •ë³´ë¥¼ ë‹´ê³  ì‹¶ì§€ ì•Šì•˜ë‹¤.</strong><br>
(ë‹¹ì‹œì—” ì„ì‹œë¡œê·¸ì¸ ì„±í–¥ì´ ê°•í–ˆë‹¤. ë³€ê²½ë  ì—¬ì§€ê°€ ë§ì•˜ê¸° ë•Œë¬¸ì—, DBì—ì„œ ê´€ë¦¬í•˜ê³  ì‹¶ì§€ ì•Šì•˜ë‹¤.)</p>
<p>ê·¸ë˜ì„œ JWTë¥¼ ì‚¬ìš©í–ˆë‹¤.<br>
JWTê°€ ì•„ë‹Œ, DBì—ì„œ Tokenì„ ê´€ë¦¬í•˜ë ¤ë©´ next-authì—ì„  í¸í•˜ê²Œ <a href="https://next-auth.js.org/adapters" target="_blank" rel="nofollow">adapter</a>ë¥¼ ì œê³µí•´ì¤€ë‹¤.</p>
<p>JWTë¡œ Tokenì„ ê´€ë¦¬í•  ë•Œ í¬ê²Œ session, access, refresh tokenì„ ì‚¬ìš©í–ˆë‹¤.<br>
ì—¬ê¸°ì„œ sessionì€ ì¸ì¦ì„, accessì™€ refreshëŠ” ì¸ê°€ì— ì‚¬ìš©í–ˆë‹¤.</p>
<br/>
<h2 id="2-1-ì¸ì¦authenticationê³¼-ì¸ê°€authorizationê°€-ë­˜ê¹Œ" style="position:relative;"><a href="#2-1-%EC%9D%B8%EC%A6%9Dauthentication%EA%B3%BC-%EC%9D%B8%EA%B0%80authorization%EA%B0%80-%EB%AD%98%EA%B9%8C" aria-label="2 1 ì¸ì¦authenticationê³¼ ì¸ê°€authorizationê°€ ë­˜ê¹Œ permalink" class="headerElement before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2-1. ì¸ì¦(Authentication)ê³¼ ì¸ê°€(Authorization)ê°€ ë­˜ê¹Œ?</h2>
<p>ì´ˆë°˜ì—ëŠ” ë‘˜ì˜ ê°œë…ì´ ë„ˆë¬´ í—·ê°ˆë ¸ë‹¤.
ì´ë¥¼ ê°€ì¥ ì˜ ì„¤ëª…í•´ì¤€ <a href="https://youtu.be/y0xMXlOAfss?si=6oSS8O34KMrJhaS3&#x26;t=62" target="_blank" rel="nofollow">ì˜ìƒ</a>ì„ ì°¾ì•˜ë‹¤.</p>
<p>í•´ë‹¹ ì˜ìƒì˜ ì„¤ëª…ì„ ì¡°ê¸ˆ ë¹Œë ¤ì„œ ì´ì•¼ê¸°í•´ë³´ìë©´,<br>
(ë‚˜ëŠ”.. ì´ìƒí•˜ê²Œ êµ°ëŒ€ë°–ì— ìƒê°ë‚˜ì§€ ì•ŠëŠ”ë‹¤.)</p>
<p>íœ´ê°€ë¥¼ ë‹¤ë…€ì˜¨ 21ì‚´ì˜ ë‚˜, ì²« íœ´ê°€ ë³µê·€í•  ë•Œ ìœ„ë³‘ì†Œì—ì„œ íœ´ê°€ì¦ì„ ë³´ì—¬ì£¼ë©° ë³µê·€ë¥¼ ì•Œë¦°ë‹¤.
ì´ë•Œ ë‚˜ì˜ ì‹ ì›ì„ ì¡°íšŒí•˜ëŠ” í—Œë³‘ë“¤, íœ´ê°€ë³µê·€ìì„ì„ í™•ì¸í•œ í›„ ìœ„ë³‘ì†Œë¥¼ í†µê³¼ì‹œì¼œì¤€ë‹¤.
ì´ê²Œ ì¸ì¦ì´ë¼ê³  ì´í•´í–ˆë‹¤.</p>
<br/>
<p>ë³µê·€í•˜ê³  ì¼ ì£¼ì¼ í›„, í›ˆë ¨ì— ì°¸ì—¬í•˜ê²Œ ëœ ë‚˜.<br>
ë‚´ì¼ ìˆì„ ì‚¬ê²©í›ˆë ¨ì„ ìœ„í•´ ë¯¸ë¦¬ ì—°ìŠµí•œë‹¤ëŠ” ì„ ì„<br>
ë‚˜ì—ê²Œ ì´ê¸°ë¥¼ ê°€ì ¸ì˜¤ë¼ê³  ì‹œí‚¨ë‹¤. ë‚˜ëŠ”, ì´ê¸°ë³´ê´€í•¨ì— ëšœë²…ëšœë²… ê±¸ì–´ê°€ì§€ë§Œ, ê·¸ ì•ì— ì„œìˆëŠ” ê²½ê³„ë³‘ë“¤.<br>
ê·¸ë“¤ì€ ë‚˜ì—ê²Œ ì‹ ì›ì„ í™•ì¸í•˜ì§€ë§Œ, ì´ê¸°ë³´ê´€í•¨ì—ì„œ ì´ê¸°ë¥¼ ê°€ì ¸ê°ˆ ê¶Œí•œì´ ì—†ëŠ” ë‚˜ëŠ” ê·¸ëŒ€ë¡œ ëŒì•„ì˜¤ê²Œ ëœë‹¤.<br>
ì´ê²Œ ì¸ê°€ë¼ê³  ì´í•´í–ˆë‹¤.</p>
<br/>
<p>ì¦‰ ë‹¤ì‹œ ì •ë¦¬í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<blockquote>
<p>ì¸ì¦(Authentication): ì„œë¹„ìŠ¤ì— ë“±ë¡ëœ ìœ ì €ì˜ ì‹ ì›ì„ ì…ì¦í•˜ëŠ” ê³¼ì • (=ë¡œê·¸ì¸)<br>
ì¸ê°€(Authorization): ì¸ì¦ëœ ì‚¬ìš©ìì— ëŒ€í•œ ìì› ì ‘ê·¼ ê¶Œí•œ í™•ì¸ (=API ìš”ì²­ì— ë”°ë¥¸ í•´ë‹¹ ìœ ì €ì˜ ë°ì´í„° ë°˜í™˜)</p>
</blockquote>
<br/>
<h1 id="3-next-authëŠ”-ì¸ì¦ì„-ì–´ë–»ê²Œ-ìœ ì§€í• ê¹Œ" style="position:relative;"><a href="#3-next-auth%EB%8A%94-%EC%9D%B8%EC%A6%9D%EC%9D%84-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%9C%A0%EC%A7%80%ED%95%A0%EA%B9%8C" aria-label="3 next authëŠ” ì¸ì¦ì„ ì–´ë–»ê²Œ ìœ ì§€í• ê¹Œ permalink" class="headerElement before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. next-authëŠ” ì¸ì¦ì„ ì–´ë–»ê²Œ ìœ ì§€í• ê¹Œ?</h1>
<p>next-authë¡œ ê°„ë‹¨íˆ loginì„ êµ¬í˜„í•´ë³´ì.<br>
ì´ë²ˆì—ë„ DBì— Tokenì„ ì €ì¥í•˜ì§€ ì•Šê³ , <strong>JWTë¥¼ ì‚¬ìš©í–ˆë‹¤.</strong><br>
ê·¸ë¦¬ê³  ì´ë¥¼ ìœ„í•´, google oauthë¥¼ ì‚¬ìš©í–ˆë‹¤.</p>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// app/api/auth/[...nextauth].ts</span>
<span class="token keyword">import</span> NextAuth <span class="token keyword">from</span> <span class="token string">'next-auth/next'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> GoogleProvider <span class="token keyword">from</span> <span class="token string">'next-auth/providers/google'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token function">NextAuth</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  secret<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NEXTAUTH_SECRET</span><span class="token punctuation">,</span>
  providers<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">GoogleProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      clientId<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">GOOGLE_CLIENT_ID</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">,</span>
      clientSecret<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">GOOGLE_CLIENT_SECRET</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  session<span class="token operator">:</span> <span class="token punctuation">{</span>
    strategy<span class="token operator">:</span> <span class="token string">'jwt'</span><span class="token punctuation">,</span>
    <span class="token comment">// Seconds - How long until an idle ses</span>
    maxAge<span class="token operator">:</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token comment">// 30 days</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span> handler <span class="token keyword">as</span> <span class="token constant">GET</span><span class="token punctuation">,</span> handler <span class="token keyword">as</span> <span class="token constant">POST</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>ì¸ì¦ê³¼ì •ì„ ê±°ì³ì„œ ë¡œê·¸ì¸ì´ ëë‹¤!</p>
<p><figure class="gatsby-resp-image-figure" style="">
    <span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/b6eb989c6ef285e148aa3371b54b58b0/5e075/success-login.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 45.833333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABPklEQVQoz52RS1PCMBSF8///kAudcUGRogio4wB9lz5om6SFAm3VxXHuhTJsXMjim5ucSXLuuRF39w94HBgYvUwwME2sPB8r17sZYZhjDMfPWDgOFrYD2w9uJwghoiRFua0hdYVCaeSFYrJc/otcKoRRApHlBeIkxTpKoFSJen9kmvbrwrHpmMOxxeHQnmvD7M80TceNCF1tkecSk9cZojiF7XhYLC1IVTKF1Ki2Ncpqx0b9w71Jb9p235C6hKCDhDF8guP6WK5sTKdzNhiZYxjDEWbzN7x/fLJZkmaIkw2CMIIfrOF6PizbhesFrAmpNDZZwZEpPnW0jmKeC3VMOtUeSpNucuZaJyOqgmLRJc8PeAbkbtkOa5blwPPDi0aVol3H7Pdt94NdvYeI6DN0dZkZocvT/lrv15TgbxR+AeMAl5WgbFUcAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/b6eb989c6ef285e148aa3371b54b58b0/a59e9/success-login.webp 192w,
/static/b6eb989c6ef285e148aa3371b54b58b0/0ca9f/success-login.webp 384w,
/static/b6eb989c6ef285e148aa3371b54b58b0/dc9b9/success-login.webp 768w,
/static/b6eb989c6ef285e148aa3371b54b58b0/e2c2f/success-login.webp 1152w,
/static/b6eb989c6ef285e148aa3371b54b58b0/f3741/success-login.webp 1338w"
              sizes="(max-width: 768px) 100vw, 768px"
              type="image/webp"
            />
          <source
            srcset="/static/b6eb989c6ef285e148aa3371b54b58b0/3b721/success-login.png 192w,
/static/b6eb989c6ef285e148aa3371b54b58b0/66595/success-login.png 384w,
/static/b6eb989c6ef285e148aa3371b54b58b0/fe486/success-login.png 768w,
/static/b6eb989c6ef285e148aa3371b54b58b0/d2d74/success-login.png 1152w,
/static/b6eb989c6ef285e148aa3371b54b58b0/5e075/success-login.png 1338w"
            sizes="(max-width: 768px) 100vw, 768px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/b6eb989c6ef285e148aa3371b54b58b0/fe486/success-login.png"
            alt="ë¡œê·¸ì¸ì´ ëë‹¤!"
            title="ë¡œê·¸ì¸ì´ ëë‹¤!"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span>
    <figcaption class="gatsby-resp-image-figcaption">ë¡œê·¸ì¸ì´ ëë‹¤!</figcaption>
  </figure></p>
<p>í•˜ì§€ë§Œ next-authëŠ” ì´ ë¡œê·¸ì¸ì„ ì–´ë–»ê²Œ ìœ ì§€í•˜ëŠ”ê±¸ê¹Œ?<br>
í˜ì´ì§€ë¥¼ ë‹«ì•˜ë‹¤ê°€, ì—´ì–´ë„ ë¡œê·¸ì¸ì´ ìœ ì§€ëœë‹¤.</p>
<p>ë‹¨, ë‹¤ë¥¸ ë¸Œë¼ìš°ì €ë¡œ ì—´ê±°ë‚˜ í¬ë¡¬ì˜ ì‹œí¬ë¦¿ëª¨ë“œë¡œ ì—´ì—ˆì„ ë•, ë¡œê·¸ì¸ì´ ìœ ì§€ë˜ì§€ ì•ŠëŠ”ë‹¤.<br>
ì¦‰, ë¸Œë¼ìš°ì € ì–´ë”˜ê°€ì—ì„œ ìœ ì € ì •ë³´ë¥¼ ì €ì¥í•˜ê³  ìˆëŠ” ê²ƒ ê°™ë‹¤.</p>
<br/>
<h2 id="3-1-ë¡œê·¸ì¸-í–ˆì„-ë•Œ-ë¸Œë¼ìš°ì €ì—-ì €ì¥ë˜ëŠ”-ì •ë³´" style="position:relative;"><a href="#3-1-%EB%A1%9C%EA%B7%B8%EC%9D%B8-%ED%96%88%EC%9D%84-%EB%95%8C-%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80%EC%97%90-%EC%A0%80%EC%9E%A5%EB%90%98%EB%8A%94-%EC%A0%95%EB%B3%B4" aria-label="3 1 ë¡œê·¸ì¸ í–ˆì„ ë•Œ ë¸Œë¼ìš°ì €ì— ì €ì¥ë˜ëŠ” ì •ë³´ permalink" class="headerElement before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3-1. ë¡œê·¸ì¸ í–ˆì„ ë•Œ ë¸Œë¼ìš°ì €ì— ì €ì¥ë˜ëŠ” ì •ë³´</h2>
<p>í¬ê²Œ ë¡œê·¸ì¸ ì •ë³´ëŠ” <code class="language-text">localStorage</code>ë‚˜ <code class="language-text">SessionStorage</code>, ë˜ëŠ” <code class="language-text">cookie</code>ì— ì €ì¥í•  ìˆ˜ ìˆë‹¤.<br>
êµ¬ê¸€ ì‹œí¬ë¦¿ëª¨ë“œë¡œ ì—´ì–´ì„œ, <strong>ë¡œê·¸ì¸ í•˜ê¸°ì „ì—</strong> localStorageì™€ SessionStorage, cookieë¥¼ í™•ì¸í•´ë³´ì.</p>
<p><figure class="gatsby-resp-image-figure" style="">
    <span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/dc7a9b1c5902eff00f4236ef2cd62392/89066/local-storage.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 42.1875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABVUlEQVQoz42Q3U7jMBCF8/5P1AWkveJmVRYu2CgrqnZLkobEjhP/tEnz9yGbgpDgYkf6dEZnPB6Po+3qBw+3ax5v79g8JFR/npCPMVkpybKCSiqOpzPWdbhjT6Mdh6KieKkoShE0P7yQH0pa7YiK3/esV1fcX/9kvbrh3687bCmxxxPWuoCx9pJbjFd3xDr3FeuItNH8TWJ22w0nZ5nGM/0w0rYtWusvtN94n4mUUux2O4SULMA8z3TdmbbVGGO+aTKBUHuvX9R7kXOOLMsoioI0TfED+n4Ih6zHr2lsUI/3zSfe6uZjeCSEIEkS4jhmv9/DstCfR4RQqEYjahWGCFlTVjJ4sm5QTUvTGupLXpYCYxyRXy1NM7Isp64VPiZApSXV0zP5Zkv6XFCJOvzrMAz0fR/U03XdhzdNE5G/yJPnh/BsH/MCyzgzuo6hH7CnkWnmv+IVrb1e7iX2O7UAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/dc7a9b1c5902eff00f4236ef2cd62392/a59e9/local-storage.webp 192w,
/static/dc7a9b1c5902eff00f4236ef2cd62392/0ca9f/local-storage.webp 384w,
/static/dc7a9b1c5902eff00f4236ef2cd62392/dc9b9/local-storage.webp 768w,
/static/dc7a9b1c5902eff00f4236ef2cd62392/e2c2f/local-storage.webp 1152w,
/static/dc7a9b1c5902eff00f4236ef2cd62392/95f20/local-storage.webp 1440w"
              sizes="(max-width: 768px) 100vw, 768px"
              type="image/webp"
            />
          <source
            srcset="/static/dc7a9b1c5902eff00f4236ef2cd62392/3b721/local-storage.png 192w,
/static/dc7a9b1c5902eff00f4236ef2cd62392/66595/local-storage.png 384w,
/static/dc7a9b1c5902eff00f4236ef2cd62392/fe486/local-storage.png 768w,
/static/dc7a9b1c5902eff00f4236ef2cd62392/d2d74/local-storage.png 1152w,
/static/dc7a9b1c5902eff00f4236ef2cd62392/89066/local-storage.png 1440w"
            sizes="(max-width: 768px) 100vw, 768px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/dc7a9b1c5902eff00f4236ef2cd62392/fe486/local-storage.png"
            alt="Local Storage"
            title="Local Storage"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span>
    <figcaption class="gatsby-resp-image-figcaption">Local Storage</figcaption>
  </figure><br>
<figure class="gatsby-resp-image-figure" style="">
    <span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/e2b3de320acb50e8b893d01ec4ff3940/89066/session-storage.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 42.1875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA80lEQVQoz5WRbUvDQBCE8///jwhCqPgGldL6wcYETSHpXSOmiTUGqeZuH0nTSJpQxYGBvdvbuRnWycOAeDomuZ/x+vSASSJs+Y4REBFsj8YKxtjBfUtHuS63oytm5zdMRtcs7jy2gQ/W0EDoQg6PAzjxxSXjkzMmpy7xdI6ezSnDxU5I9i5b1rCduttr6ayzNeFjwMvzClt98rX9oDK28SXy4+iY4MBhWZYorUmSBKUUeZ5jpX08HP5TME1TfN/H8zyiKELEYixUZr+Af9LZbN5YLhVKabIs3/1SN/pRf6sPHNZCNbVeURRFE8sOY/UXcWzj34+2bdzuVyqWAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/e2b3de320acb50e8b893d01ec4ff3940/a59e9/session-storage.webp 192w,
/static/e2b3de320acb50e8b893d01ec4ff3940/0ca9f/session-storage.webp 384w,
/static/e2b3de320acb50e8b893d01ec4ff3940/dc9b9/session-storage.webp 768w,
/static/e2b3de320acb50e8b893d01ec4ff3940/e2c2f/session-storage.webp 1152w,
/static/e2b3de320acb50e8b893d01ec4ff3940/95f20/session-storage.webp 1440w"
              sizes="(max-width: 768px) 100vw, 768px"
              type="image/webp"
            />
          <source
            srcset="/static/e2b3de320acb50e8b893d01ec4ff3940/3b721/session-storage.png 192w,
/static/e2b3de320acb50e8b893d01ec4ff3940/66595/session-storage.png 384w,
/static/e2b3de320acb50e8b893d01ec4ff3940/fe486/session-storage.png 768w,
/static/e2b3de320acb50e8b893d01ec4ff3940/d2d74/session-storage.png 1152w,
/static/e2b3de320acb50e8b893d01ec4ff3940/89066/session-storage.png 1440w"
            sizes="(max-width: 768px) 100vw, 768px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/e2b3de320acb50e8b893d01ec4ff3940/fe486/session-storage.png"
            alt="Session Storage"
            title="Session Storage"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span>
    <figcaption class="gatsby-resp-image-figcaption">Session Storage</figcaption>
  </figure><br>
<figure class="gatsby-resp-image-figure" style="">
    <span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/2d89f9bc6eb8b50454ec57960da3ef9e/89066/cookie.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 42.1875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABLElEQVQoz52Py04CQRBF+f8/0oUL40aNAlEHGc3oKAgMMN1V3fOSxzHdRnTjQis5ya1K163bPe89SZKQZRnOOUJZ1/KY5Tw9v7AuhfvxA5PpnNXaslwZktEYX7WURqnqjmJVYsVTrB09YyyBzWbLV1XtDlEf587XiDrUeeqmpapbVB1tt4m6e99S1Q1N22FdQ68oChaLBapKXdfs9zvEN1hRqsrH5ZA8IKqRqEXjofAu7AZWpdALIk1T8jyPeOdQ31Aai6rEBRGJBP3d66H/nCnLdTB0jvvRiIc05SXPUbFo1VEaiVdFfuen2cHQ9C8YnRzxen4Gs1eYZLinDBO/In83tKfHZIMrpsNr3m6HLO+G+P4l1tr/JdQs5e1mwCyYjRN28wluNsdY+VfCD2hsXZKmKiwLAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/2d89f9bc6eb8b50454ec57960da3ef9e/a59e9/cookie.webp 192w,
/static/2d89f9bc6eb8b50454ec57960da3ef9e/0ca9f/cookie.webp 384w,
/static/2d89f9bc6eb8b50454ec57960da3ef9e/dc9b9/cookie.webp 768w,
/static/2d89f9bc6eb8b50454ec57960da3ef9e/e2c2f/cookie.webp 1152w,
/static/2d89f9bc6eb8b50454ec57960da3ef9e/95f20/cookie.webp 1440w"
              sizes="(max-width: 768px) 100vw, 768px"
              type="image/webp"
            />
          <source
            srcset="/static/2d89f9bc6eb8b50454ec57960da3ef9e/3b721/cookie.png 192w,
/static/2d89f9bc6eb8b50454ec57960da3ef9e/66595/cookie.png 384w,
/static/2d89f9bc6eb8b50454ec57960da3ef9e/fe486/cookie.png 768w,
/static/2d89f9bc6eb8b50454ec57960da3ef9e/d2d74/cookie.png 1152w,
/static/2d89f9bc6eb8b50454ec57960da3ef9e/89066/cookie.png 1440w"
            sizes="(max-width: 768px) 100vw, 768px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/2d89f9bc6eb8b50454ec57960da3ef9e/fe486/cookie.png"
            alt="Cookie"
            title="Cookie"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span>
    <figcaption class="gatsby-resp-image-figcaption">Cookie</figcaption>
  </figure></p>
<p>Session Storageì—ëŠ” ì•„ë¬´ê²ƒë„ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤.<br>
í•˜ì§€ë§Œ Local Storageì™€ Cookieì—ëŠ” next-authì˜ ì •ë³´ê°€ ì €ì¥ëœë‹¤.</p>
<h3 id="local-storageì—-ì €ì¥ë˜ëŠ”-ì •ë³´" style="position:relative;"><a href="#local-storage%EC%97%90-%EC%A0%80%EC%9E%A5%EB%90%98%EB%8A%94-%EC%A0%95%EB%B3%B4" aria-label="local storageì— ì €ì¥ë˜ëŠ” ì •ë³´ permalink" class="headerElement before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Local Storageì— ì €ì¥ë˜ëŠ” ì •ë³´</h3>
<p>ë¨¼ì €, LocalStorageì—ëŠ” ì •ë³´ê°€ ì €ì¥ë ê±°ë¼ ì˜ˆìƒëª»í–ˆëŠ”ë°, í™•ì¸í•´ë³´ì.<br>
ìì„¸íˆ ë³´ë‹ˆ, <code class="language-text">getSession</code>ì´ë¼ëŠ” ë‹¨ì–´ê°€ ê°€ì¥ ë¨¼ì € ëˆˆì— ë„ì—ˆë‹¤.<br>
next-authì—ì„œ <a href="https://next-auth.js.org/getting-started/client#getsession" target="_blank" rel="nofollow">getSession</a>ì´ë¼ëŠ” APIë¥¼ ì œê³µí•˜ëŠ”ë° ê·¸ ì—­í• ì´ ë¬´ì—‡ì¸ì§€ í™•ì¸í•´ë´¤ë‹¤.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">When called, getSession() will send a request to /api/auth/session
and returns a promise with a session object, or null if no session exists.

í˜¸ì¶œë˜ë©´ getSession()ì€ /api/auth/sessionìœ¼ë¡œ ìš”ì²­ì„ ë³´ë‚´ê³ 
ì„¸ì…˜ ê°ì²´ê°€ ìˆëŠ” í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•˜ê±°ë‚˜ ì„¸ì…˜ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš° nullì„ ë°˜í™˜í•©ë‹ˆë‹¤.</code></pre></div>
<p>ì„¸ì…˜ì •ë³´ë¥¼ ìš”ì²­í•˜ê³ , ì„¸ì…˜ê°ì²´ê°€ ìˆë‹¤ë©´ ì„¸ì…˜ì— ë‹´ê¸´ ì •ë³´ë¥¼, ì„¸ì…˜ì´ ì—†ë‹¤ë©´ nullì„ ë°˜í™˜í•˜ëŠ” ê±¸ë¡œ ë³´ì¸ë‹¤.</p>
<br/>
<p>ê·¸ ë‹¤ìŒì—” ì–´ë–»ê²Œ í–ˆì„ ë•Œ, localStorageì— ì´ ì •ë³´ê°€ ì €ì¥ë˜ëŠ”ì§€ í™•ì¸í•´ë´¤ë‹¤.<br>
next-authë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„ , ë‹¤ìŒê³¼ ê°™ì´ SessionProviderë¥¼ ê°ì‹¸ì¤˜ì•¼í•œë‹¤.</p>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token string">'use client'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> SessionProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'next-auth/react'</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">Props</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  children<span class="token operator">:</span> React<span class="token punctuation">.</span>ReactNode<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> AuthContext<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token constant">FC</span><span class="token operator">&lt;</span>Props<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> children <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">SessionProvider</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">SessionProvider</span></span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>SessionProviderë¡œ ê°ì‹¸ì¤˜ì•¼, useSession hookì„ í´ë¼ì´ì–¸íŠ¸ í™˜ê²½ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.<br>
(ì°¸ê³ ë¡œ, ì„œë²„ì—ì„œ ì‚¬ìš©í•˜ë ¤ë©´, <a href="https://next-auth.js.org/configuration/nextjs#getserversession" target="_blank" rel="nofollow">getServerSession</a>ì„ ì‚¬ìš©í•œë‹¤.)</p>
<br/>
<p>ê·¼ë° ì´ providerë¥¼ ê°ì‹¸ì§€ ì•Šìœ¼ë‹ˆ, localStorageì— ë” ì´ìƒ ì •ë³´ê°€ ì €ì¥ë˜ì§€ ì•Šì•˜ë‹¤.<br>
ê·¸ë˜ì„œ <a href="https://github.com/nextauthjs/next-auth/blob/a595ca72595b2bd350b23068f9e437726cef9a9d/packages/next-auth/src/react.tsx#L337" target="_blank" rel="nofollow">SessionProvider ë‚´ë¶€</a>ë¥¼ í•œ ë²ˆ í™•ì¸í•´ë´¤ë‹¤.</p>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getSession</span><span class="token punctuation">(</span>params<span class="token operator">?</span><span class="token operator">:</span> GetSessionParams<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> session <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token generic-function"><span class="token function">fetchData</span><span class="token generic class-name"><span class="token operator">&lt;</span>Session<span class="token operator">></span></span></span><span class="token punctuation">(</span>
    <span class="token string">"session"</span><span class="token punctuation">,</span>
    __NEXTAUTH<span class="token punctuation">,</span>
    logger<span class="token punctuation">,</span>
    params
  <span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>params<span class="token operator">?.</span>broadcast <span class="token operator">??</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">broadcast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// broadcast???</span>
      event<span class="token operator">:</span> <span class="token string">"session"</span><span class="token punctuation">,</span>
      data<span class="token operator">:</span> <span class="token punctuation">{</span> trigger<span class="token operator">:</span> <span class="token string">"getSession"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> session
<span class="token punctuation">}</span></code></pre></div>
<p>SessionProvider ë‚´ë¶€ì— getSessionì´ ì¡´ì¬í•˜ê³ , getSessionì—ì„œ broadcastê°€ ì¡´ì¬í•œë‹¤.<br>
ì´ broadcastë¥¼ ì°¾ì•„ë³´ë‹ˆ, localStorageì— ì €ì¥í•˜ëŠ” ë¡œì§ì„ ë°œê²¬í–ˆë‹¤.</p>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// node_modules/next-auth/src/client/_utils.ts</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">BroadcastChannel</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"nextauth.message"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token comment">/** Get notified by other tabs/windows. */</span>
    <span class="token function">receive</span><span class="token punctuation">(</span><span class="token function-variable function">onReceive</span><span class="token operator">:</span> <span class="token punctuation">(</span>message<span class="token operator">:</span> BroadcastMessage<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token function-variable function">handler</span> <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token operator">:</span> StorageEvent<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>key <span class="token operator">!==</span> name<span class="token punctuation">)</span> <span class="token keyword">return</span>
        <span class="token keyword">const</span> message<span class="token operator">:</span> BroadcastMessage <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>newValue <span class="token operator">??</span> <span class="token string">"{}"</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>message<span class="token operator">?.</span>event <span class="token operator">!==</span> <span class="token string">"session"</span> <span class="token operator">||</span> <span class="token operator">!</span>message<span class="token operator">?.</span>data<span class="token punctuation">)</span> <span class="token keyword">return</span>

        <span class="token function">onReceive</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"storage"</span><span class="token punctuation">,</span> handler<span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">"storage"</span><span class="token punctuation">,</span> handler<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">/** Notify other tabs/windows. */</span>
    <span class="token function">post</span><span class="token punctuation">(</span>message<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">unknown</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> window <span class="token operator">===</span> <span class="token string">"undefined"</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span> <span class="token comment">// ì´ ë¶€ë¶„</span>
          name<span class="token punctuation">,</span>
          <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>message<span class="token punctuation">,</span> timestamp<span class="token operator">:</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span>
        <span class="token comment">/**
         * The localStorage API isn't always available.
         * It won't work in private mode prior to Safari 11 for example.
         * Notifications are simply dropped if an error is encountered.
         */</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>ì¦‰, ì •ë¦¬í•´ë³´ë©´</p>
<blockquote>
<p>localStorageì— ì €ì¥ë˜ëŠ” ì •ë³´ëŠ”, sessionì˜ ìƒíƒœê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤, broadcastë¥¼ í†µí•´ localStorageì— ì €ì¥í•œë‹¤.<br>
ê·¸ë¦¬ê³  ë‹¤ë¥¸ íƒ­ì´ë‚˜, ìœˆë„ìš°ì—ì„œë„ localStorageì— ì €ì¥ëœ ì •ë³´ë¥¼ ë°›ì•„ì„œ, ì„¸ì…˜ ì •ë³´ë¥¼ ì—…ë°ì´íŠ¸í•œë‹¤.</p>
</blockquote>
<br/>
<h3 id="cookieì—-ì €ì¥ë˜ëŠ”-ì •ë³´" style="position:relative;"><a href="#cookie%EC%97%90-%EC%A0%80%EC%9E%A5%EB%90%98%EB%8A%94-%EC%A0%95%EB%B3%B4" aria-label="cookieì— ì €ì¥ë˜ëŠ” ì •ë³´ permalink" class="headerElement before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cookieì— ì €ì¥ë˜ëŠ” ì •ë³´</h3>
<p>ë‹¤ìŒìœ¼ë¡œ, Cookieì— ì €ì¥ë˜ëŠ” ì •ë³´ë¥¼ í™•ì¸í•´ë³´ì.<br>
ì´ë²ˆì—” <strong>ë¡œê·¸ì¸ì„ í•œ í›„ì—</strong> í™•ì¸í•´ë³´ì.</p>
<p><figure class="gatsby-resp-image-figure" style="">
    <span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/2f70140e00371fc2e9f3db92107982cf/4ab23/saved-cookie.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 12.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAr0lEQVQI1x2N0XKDIBBF/f+fq02TtjPtdKoEiYJEAUHU9HTCvuzeO2fOVks6CGknxI3Jr/y2HX7JhLjT3UaM9UilS//90yJkjx4dUpmyh3Gm1xPaupKr8/mduj5xlQrnI6e3Cy/1K9pYmlZi7468Pfj4/OIqO1yILGlDqh4fEn9QmCf/nErdhiKLKRPXDSEkTSMwdmIwtjxZ80ErJNPsi2DNO/fZs8TM8aAwswvl/gcDmOKpZOxSlAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/2f70140e00371fc2e9f3db92107982cf/a59e9/saved-cookie.webp 192w,
/static/2f70140e00371fc2e9f3db92107982cf/0ca9f/saved-cookie.webp 384w,
/static/2f70140e00371fc2e9f3db92107982cf/dc9b9/saved-cookie.webp 768w,
/static/2f70140e00371fc2e9f3db92107982cf/e2c2f/saved-cookie.webp 1152w,
/static/2f70140e00371fc2e9f3db92107982cf/13d4d/saved-cookie.webp 1462w"
              sizes="(max-width: 768px) 100vw, 768px"
              type="image/webp"
            />
          <source
            srcset="/static/2f70140e00371fc2e9f3db92107982cf/3b721/saved-cookie.png 192w,
/static/2f70140e00371fc2e9f3db92107982cf/66595/saved-cookie.png 384w,
/static/2f70140e00371fc2e9f3db92107982cf/fe486/saved-cookie.png 768w,
/static/2f70140e00371fc2e9f3db92107982cf/d2d74/saved-cookie.png 1152w,
/static/2f70140e00371fc2e9f3db92107982cf/4ab23/saved-cookie.png 1462w"
            sizes="(max-width: 768px) 100vw, 768px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/2f70140e00371fc2e9f3db92107982cf/fe486/saved-cookie.png"
            alt="cookieì— ì €ì¥ëœ ì •ë³´ë“¤"
            title="cookieì— ì €ì¥ëœ ì •ë³´ë“¤"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span>
    <figcaption class="gatsby-resp-image-figcaption">cookieì— ì €ì¥ëœ ì •ë³´ë“¤</figcaption>
  </figure></p>
<p><strong>ğŸ’¬ <code class="language-text">next-auth.callback-url</code>ì€ ì¸ì¦ì„ ì™„ë£Œí•œ ë’¤, ë¦¬ë‹¤ì´ë ‰íŠ¸í•  urlì´ë‹¤.</strong><br>
ì˜ˆë¥¼ë“¤ì–´, ë¡œê·¸ì¸ì„ í•˜ê³ , <code class="language-text">/posts</code>ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸í•˜ê³  ì‹¶ë‹¤ë©´, ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •í•˜ë©´ ëœë‹¤.</p>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// app/page.tsx</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Home</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>p-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>session <span class="token operator">?</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">í™˜ì˜í•©ë‹ˆë‹¤, </span><span class="token punctuation">{</span>session<span class="token punctuation">.</span>user<span class="token operator">?.</span>name<span class="token punctuation">}</span><span class="token plain-text">!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">
          //...
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>
      <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">ë¡œê·¸ì¸ì„ í•´ì£¼ì„¸ìš”.</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>
            <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span>
              <span class="token function">signIn</span><span class="token punctuation">(</span><span class="token string">'google'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                callbackUrl<span class="token operator">:</span> <span class="token string">'http://localhost:3000/posts'</span><span class="token punctuation">,</span> <span class="token comment">// callbackUrl ì„¤ì •</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span></span>
          <span class="token punctuation">></span></span><span class="token plain-text">
            Googleë¡œ ë¡œê·¸ì¸í•˜ê¸°
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>callbackUrlì„ ì§€ì •í•˜ê³  ë¡œê·¸ì¸ì´ ì™„ë£Œë˜ë©´, ì¿ í‚¤ì— ë‹¤ìŒê³¼ ê°™ì´ ì €ì¥ëœë‹¤.</p>
<p><figure class="gatsby-resp-image-figure" style="">
    <span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/fd364df417af607d3d5b2d57b3d9493f/5040b/cookie-callback-url.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 52.60416666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABWElEQVQoz42Q3U7CQBCF+/6P5I3RaNQLNcYftIBYipRSurttaaHQnc9YCm1MVDY5mdkzZ2fOjjOZzgkjTTBX6LRg8D7mm1Mmx/MDojhl5E157vUZfkyYxwmePyNSGeHCMA1jYpMThIokK3HuXzxun0Y89Hw+4y2PbsD1nYvraV5HCwJt6fuGR3dKoKpa0x+bmp8ZYeAbogxcTzEOVzgLZYhVgk4yyq2gTEYUa0yao5Mlq7IiSQtinbCpqO9Zvq7juqmVGyHNCpbFBofOEZE2b6K10uYiWNnVal7kkH+fyoJTkwe0QitttJ26yI+6bYaIUFnZOdw5a4V7N92He91Pvjuwadg8kG5D+bWh/NdQaL7ScfCXQznGYbOcDuxhyH6nRzfU/R7L4Rv5u0s2eCNxXyi8IXb4SrUuqYRaeAy2leCENxdEV2fMG8wuTwmvz8nPT2C9OqziWHwBFWhXJIpJblwAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/fd364df417af607d3d5b2d57b3d9493f/a59e9/cookie-callback-url.webp 192w,
/static/fd364df417af607d3d5b2d57b3d9493f/0ca9f/cookie-callback-url.webp 384w,
/static/fd364df417af607d3d5b2d57b3d9493f/dc9b9/cookie-callback-url.webp 768w,
/static/fd364df417af607d3d5b2d57b3d9493f/e2c2f/cookie-callback-url.webp 1152w,
/static/fd364df417af607d3d5b2d57b3d9493f/55fcb/cookie-callback-url.webp 1468w"
              sizes="(max-width: 768px) 100vw, 768px"
              type="image/webp"
            />
          <source
            srcset="/static/fd364df417af607d3d5b2d57b3d9493f/3b721/cookie-callback-url.png 192w,
/static/fd364df417af607d3d5b2d57b3d9493f/66595/cookie-callback-url.png 384w,
/static/fd364df417af607d3d5b2d57b3d9493f/fe486/cookie-callback-url.png 768w,
/static/fd364df417af607d3d5b2d57b3d9493f/d2d74/cookie-callback-url.png 1152w,
/static/fd364df417af607d3d5b2d57b3d9493f/5040b/cookie-callback-url.png 1468w"
            sizes="(max-width: 768px) 100vw, 768px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/fd364df417af607d3d5b2d57b3d9493f/fe486/cookie-callback-url.png"
            alt="encode â†’ decodeí•´ë³´ë©´, localhost:3000/postsê°€ ì €ì¥ë˜ì–´ ìˆìŒ"
            title="encode â†’ decodeí•´ë³´ë©´, localhost:3000/postsê°€ ì €ì¥ë˜ì–´ ìˆìŒ"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span>
    <figcaption class="gatsby-resp-image-figcaption">encode â†’ decodeí•´ë³´ë©´, localhost:3000/postsê°€ ì €ì¥ë˜ì–´ ìˆìŒ</figcaption>
  </figure></p>
<br/>
<p><strong>ğŸ’¬ ê·¸ëŸ¼, <code class="language-text">next-auth.csrf-token</code>ëŠ” ë¬´ì—‡ì¼ê¹Œ?</strong><br>
ì´ ë¶€ë¶„ì€ ì„¤ëª…ì´ ë„ˆë¬´ ê¸¸ì–´ì§ˆ ê²ƒ ê°™ì•„ì„œ, <a href="https://youtu.be/cUmIB2sjjdw?si=btICVO6EFSewEf5M" target="_blank" rel="nofollow">ë‹¤ë¥¸ ì˜ìƒ</a>ë¡œ ëŒ€ì²´í•˜ë ¤ í•œë‹¤.<br>
ê°„ëµíˆ, ë³´ì•ˆì„ ê°•í™”í•˜ê¸° ìœ„í•´ í•˜ë‚˜ì˜ ê²€ì¦ìˆ˜ë‹¨ìœ¼ë¡œ tokenì„ ë” ë‘ëŠ” ê²ƒì´ë‹¤.</p>
<p>ì°¸ê³ ë¡œ, ë‚˜ëŠ” ë”°ë¡œ ì„¤ì •ì„ í•´ì£¼ì§„ ì•Šì•˜ë‹¤.<br>
<code class="language-text">4-1. ì£¼ì˜í•  ì </code>ì—ì„œë„ ì„¤ëª…í•˜ê² ì§€ë§Œ, ì´ ì˜ˆì‹œì—ì„  ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ë„ë©”ì¸ì´ ì¼ì¹˜í•˜ê¸°ì— sameSiteë¡œ ì¸í•´<br>
CSRFë¥¼ ë°©ì§€í•  ìˆ˜ ìˆë‹¤ê³  íŒë‹¨í–ˆë‹¤.</p>
<br/>
<p><strong>ğŸ’¬ ê·¸ëŸ¼ ë§ˆì§€ë§‰ìœ¼ë¡œ <code class="language-text">next-auth.session-token</code>ì€ ë¬´ì—‡ì¼ê¹Œ?</strong><br>
next-authë¡œ ë¡œê·¸ì¸ì„ í•˜ë©´, JWTì„ ì‚¬ìš©í•˜ì—¬ ì„¸ì…˜ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤.<br>
ì¦‰, ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í•˜ë©´ HttpOnly ì¿ í‚¤ì— JWTê°€ ìƒì„±ëœë‹¤.</p>
<p><figure class="gatsby-resp-image-figure" style="">
    <span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/6c3ea4f39507260110bfd71bc6a47007/4ab23/next-auth-session-tokne.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 59.895833333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABzklEQVQoz62RO3PaQBSF9f+r9OlTp0kKp3AA2wHzCMbYmKd4CmxA2l09VgJPvoxWEsZxm+Kbe+45Z3c1I6vTdxjNXSZLge0obMen1bWZbXwGM5fe5IUne0e9M6bRmTCcezyMNmam9Kc7xitluosXjbXYKDqPNr+7Y4bTZ57dmNb9iE5vynTlMVsLdvKVbn+Osw1wgz/M15L1XiMimDkCN8B4zjbE8oMQ1/NwXY8wjIjjA3vXwxMCqXzSPE4O7PcucZJwPL4ShhodJxwOR3w/JEmOBGFEpDWWOeSnBCjlI6QyOvXSTOae8gOkUkZLmXlG53k6lVJYWUGe8e8uKTpKZXm2q1zLk0475sKimL5QhOdanLzzwx85feH/vVBIZPoDckShZTpl7mVTyaInT9mblighsJRO8LVGRQUxvo5RoUaGEdLMTKt3+0fSu6xdq8623UQ83OF127j3bfZ3LaJBj3jcJxr20KOn9wwzouHbHo366E4T6/HiG7ValdurCrVKmZvST25Kl1QrZcOvconb6yvqN9dmL/Q51dIllWqNwedPWL0f32k1Gjy0mmzmM5ypzfNywWpqs7InZi7tiSHN13nHyXPj2WNWL1vcr1/4C5ZAfiWiURbFAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/6c3ea4f39507260110bfd71bc6a47007/a59e9/next-auth-session-tokne.webp 192w,
/static/6c3ea4f39507260110bfd71bc6a47007/0ca9f/next-auth-session-tokne.webp 384w,
/static/6c3ea4f39507260110bfd71bc6a47007/dc9b9/next-auth-session-tokne.webp 768w,
/static/6c3ea4f39507260110bfd71bc6a47007/e2c2f/next-auth-session-tokne.webp 1152w,
/static/6c3ea4f39507260110bfd71bc6a47007/13d4d/next-auth-session-tokne.webp 1462w"
              sizes="(max-width: 768px) 100vw, 768px"
              type="image/webp"
            />
          <source
            srcset="/static/6c3ea4f39507260110bfd71bc6a47007/3b721/next-auth-session-tokne.png 192w,
/static/6c3ea4f39507260110bfd71bc6a47007/66595/next-auth-session-tokne.png 384w,
/static/6c3ea4f39507260110bfd71bc6a47007/fe486/next-auth-session-tokne.png 768w,
/static/6c3ea4f39507260110bfd71bc6a47007/d2d74/next-auth-session-tokne.png 1152w,
/static/6c3ea4f39507260110bfd71bc6a47007/4ab23/next-auth-session-tokne.png 1462w"
            sizes="(max-width: 768px) 100vw, 768px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/6c3ea4f39507260110bfd71bc6a47007/fe486/next-auth-session-tokne.png"
            alt="ìƒì„±ëœ JWT í† í°"
            title="ìƒì„±ëœ JWT í† í°"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span>
    <figcaption class="gatsby-resp-image-figcaption">ìƒì„±ëœ JWT í† í°</figcaption>
  </figure></p>
<p>ì´ ì¿ í‚¤ëŠ” HttpOnlyë¡œ ë§Œë“¤ì–´ì ¸ í´ë¼ì´ì–¸íŠ¸ì—ì„œ JSë¡œ ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.<br>
ë˜í•œ, ì´ JWTëŠ” Secretí‚¤ë¡œ ì•”í˜¸í™”ë˜ì–´ìˆë‹¤.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// app/api/auth/[...nextauth].ts</span>
<span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token function">NextAuth</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  secret<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NEXTAUTH_SECRET</span><span class="token punctuation">,</span> <span class="token comment">// ì—¬ê¸° Secret Key</span>
  providers<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">GoogleProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      clientId<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">GOOGLE_CLIENT_ID</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">,</span>
      clientSecret<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">GOOGLE_CLIENT_SECRET</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  session<span class="token operator">:</span> <span class="token punctuation">{</span>
    strategy<span class="token operator">:</span> <span class="token string">'jwt'</span><span class="token punctuation">,</span>
    maxAge<span class="token operator">:</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token comment">// 30 days</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>ì‚¬ìš©ìê°€ ë¡œê·¸ì•„ì›ƒí•˜ë©´ ì¿ í‚¤ì—ì„œ JWTê°€ ì‚­ì œë˜ê³ , ì„¸ì…˜ì„ ì—†ì• ì¤€ë‹¤.</p>
<br/>
<p><strong>ğŸ’¬ ê·¼ë°, ì•„ê¹Œë¶€í„° ë‚˜ì˜¤ë˜ sessionì´ë€ê±´ ë­˜ê¹Œ?</strong><br>
next-authì—ì„œ ì œì‹œí•˜ëŠ” sessionì´ë€ í•œ ë¬¸ì¥ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<blockquote>
<p>â€˜ì‚¬ìš©ìê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ë¡œê·¸ì¸í•˜ë©´ ì¼ì •ì‹œê°„ë™ì•ˆ ë¡œê·¸ì¸í•  í•„ìš”ê°€ ì—†ë„ë¡ ì‚¬ìš©ì ì •ë³´ ì €ì¥ë°©ë²•â€™<br>
next-authì—ì„  ì„¸ì…˜ìœ¼ë¡œ í¬ê²Œ <a href="https://authjs.dev/concepts/session-strategies" target="_blank" rel="nofollow">ë‘ ê°€ì§€ ì „ëµ</a>ì„ ì œì‹œí•˜ê³  ìˆë‹¤.<br>
(ìœ„ì—ì„œ ì–¸ê¸‰í–ˆë˜ JWT, Database)</p>
</blockquote>
<br/>
<h2 id="3-2-next-auth-ì¸ì¦ì„-ìœ ì§€í•˜ëŠ”-ë°©ë²•" style="position:relative;"><a href="#3-2-next-auth-%EC%9D%B8%EC%A6%9D%EC%9D%84-%EC%9C%A0%EC%A7%80%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95" aria-label="3 2 next auth ì¸ì¦ì„ ìœ ì§€í•˜ëŠ” ë°©ë²• permalink" class="headerElement before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3-2. next-auth ì¸ì¦ì„ ìœ ì§€í•˜ëŠ” ë°©ë²•</h2>
<p>ì •ë¦¬í•´ë³´ë©´, next-authì—ì„œ ì¸ì¦ì„ ìœ ì§€í•˜ëŠ” ë°©ë²•ì€, ë‘ ê°€ì§€ê°€ ìˆë‹¤. (JWT, DB)<br>
ì´ ì¤‘, JWTë¡œ ì¸ì¦ì„ ìœ ì§€í•˜ëŠ” ë°©ë²•ì€, cookieì— ì €ì¥ëœ ì •ë³´(=<code class="language-text">next-auth.session-token</code>)ë¥¼ í†µí•´ ìœ ì§€í•œë‹¤.</p>
<p>ê·¸ë¦¬ê³  secret keyë¡œ ì•”í˜¸í™”ë˜ì–´ìˆê¸° ë•Œë¬¸ì—, í´ë¼ì´ì–¸íŠ¸ì—ì„œëŠ” ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.<br>
ë§Œì•½ ë§Œë£Œì‹œê°„ì´ ëë‚¬ì„ ê²½ìš°, ë‹¤ì‹œ ë¡œê·¸ì¸ì„ í•´ì•¼í•œë‹¤.</p>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token function">NextAuth</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  secret<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NEXTAUTH_SECRET</span><span class="token punctuation">,</span>
  providers<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">GoogleProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      clientId<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">GOOGLE_CLIENT_ID</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">,</span>
      clientSecret<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">GOOGLE_CLIENT_SECRET</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  session<span class="token operator">:</span> <span class="token punctuation">{</span>
    strategy<span class="token operator">:</span> <span class="token string">'jwt'</span><span class="token punctuation">,</span>
    maxAge<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token comment">// default 30ì¼ -> 10ì´ˆë¡œ ë³€ê²½</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>ìœ„ì™€ ê°™ì´, JWT maxAgeë¥¼ 10ì´ˆë¡œ ë³€ê²½í–ˆì„ ê²½ìš°, ë¡œê·¸ì¸ ì´í›„ 10ì´ˆ ë’¤ ë¡œê·¸ì•„ì›ƒë˜ê³ ,<br>
cookieì— <code class="language-text">next-auth.session-token</code>ëŠ” ì‚­ì œëœë‹¤.</p>
<br/>
<h1 id="4-next-authì˜-ì¸ê°€ëŠ”-ì–´ë–»ê²Œ-ì´ë£¨ì–´ì§ˆê¹Œ" style="position:relative;"><a href="#4-next-auth%EC%9D%98-%EC%9D%B8%EA%B0%80%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%9D%B4%EB%A3%A8%EC%96%B4%EC%A7%88%EA%B9%8C" aria-label="4 next authì˜ ì¸ê°€ëŠ” ì–´ë–»ê²Œ ì´ë£¨ì–´ì§ˆê¹Œ permalink" class="headerElement before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. next-authì˜ ì¸ê°€ëŠ” ì–´ë–»ê²Œ ì´ë£¨ì–´ì§ˆê¹Œ?</h1>
<p>ì´ì œ ì¸ê°€ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì.
ê°„ë‹¨í•˜ê²Œ, apië¥¼ í•˜ë‚˜ ë§Œë“¤ì–´ë³´ì</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// app/api/posts.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> NextRequest<span class="token punctuation">,</span> NextResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'next/server'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getToken <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'next-auth/jwt'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> posts <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">//mocking...</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token constant">GET</span><span class="token punctuation">(</span>request<span class="token operator">:</span> NextRequest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> token <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span> req<span class="token operator">:</span> request<span class="token punctuation">,</span> secret<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">SECRET</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">,</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// logë¥¼ í™•ì¸</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> NextResponse<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>posts<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> NextResponse<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">'Tokenì„ í™•ì¸í•´ì£¼ì„¸ìš”.'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token number">401</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>ë¡œê·¸ì¸ì„ í•´ì„œ cookieì— ì •ë³´ê°€ ì˜ ì €ì¥ëë‹¤ë©´,<br>
next-authì—ì„œ ì œê³µí•˜ëŠ” <a href="https://next-auth.js.org/tutorials/securing-pages-and-api-routes#using-gettoken" target="_blank" rel="nofollow">getToken</a> APIë¥¼ ì‚¬ìš©í•´, ì•”í˜¸í™”ëœ ì¿ í‚¤ ë‚´ ìœ ì €ì •ë³´ë¥¼ ë³µí˜¸í™”í•  ìˆ˜ ìˆë‹¤.</p>
<br/>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// app/pages.tsx</span>
<span class="token string">'use client'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> signIn<span class="token punctuation">,</span> signOut<span class="token punctuation">,</span> useSession <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'next-auth/react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Home</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> session <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>posts<span class="token punctuation">,</span> setPosts<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">fetchPosts</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/api/posts'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>res<span class="token punctuation">.</span>ok<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'postsë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆì–´ìš”!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setPosts</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">renderSessionInfo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pre</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>overflow-auto bg-gray-100 p-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>session<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pre</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>p-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>session <span class="token operator">?</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">í™˜ì˜í•©ë‹ˆë‹¤, </span><span class="token punctuation">{</span>session<span class="token punctuation">.</span>user<span class="token operator">?.</span>name<span class="token punctuation">}</span><span class="token plain-text">!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">signOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">ë¡œê·¸ì•„ì›ƒ</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mt-4 border border-black<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span><span class="token function">renderSessionInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">

          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>fetchPosts<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">Fetch Posts</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text"> // ë¡œê·¸ì¸ í–ˆì„ ë•Œ, postsë¥¼ ë¶ˆëŸ¬ì˜¤ë©´?
          </span><span class="token punctuation">{</span>posts <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">{</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>posts<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>
      <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">ë¡œê·¸ì¸ì„ í•´ì£¼ì„¸ìš”.</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">signIn</span><span class="token punctuation">(</span><span class="token string">'google'</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">Googleë¡œ ë¡œê·¸ì¸í•˜ê¸°</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">

          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>fetchPosts<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">Fetch Posts</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text"> // ë¡œê·¸ì¸ ì•ˆí–ˆì„ ë•Œ, postsë¥¼ ë¶ˆëŸ¬ì˜¤ë©´?
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p><figure class="gatsby-resp-image-figure" style="">
    <span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/d7cbc799938ea69de17c73a23883b4d7/34cf9/fail-fetch.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 9.895833333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAc0lEQVQI123GywrCMBQA0f7/bylmW2oQBBdNLZTaZpFHU7W5GUHFlYvDTLVXit1BUR/1f1pTNw3mdObWDbSXgbGfWeeJu7WID5Tg8ZPDjo6qNYbu2uNjJKZEXNKn31/SigsB7xzkje3xRHKGUt6KyI9k4QXxE5WHQhsl8QAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/d7cbc799938ea69de17c73a23883b4d7/a59e9/fail-fetch.webp 192w,
/static/d7cbc799938ea69de17c73a23883b4d7/0ca9f/fail-fetch.webp 384w,
/static/d7cbc799938ea69de17c73a23883b4d7/dc9b9/fail-fetch.webp 768w,
/static/d7cbc799938ea69de17c73a23883b4d7/e2c2f/fail-fetch.webp 1152w,
/static/d7cbc799938ea69de17c73a23883b4d7/f3efb/fail-fetch.webp 1536w,
/static/d7cbc799938ea69de17c73a23883b4d7/c8d93/fail-fetch.webp 2858w"
              sizes="(max-width: 768px) 100vw, 768px"
              type="image/webp"
            />
          <source
            srcset="/static/d7cbc799938ea69de17c73a23883b4d7/3b721/fail-fetch.png 192w,
/static/d7cbc799938ea69de17c73a23883b4d7/66595/fail-fetch.png 384w,
/static/d7cbc799938ea69de17c73a23883b4d7/fe486/fail-fetch.png 768w,
/static/d7cbc799938ea69de17c73a23883b4d7/d2d74/fail-fetch.png 1152w,
/static/d7cbc799938ea69de17c73a23883b4d7/e8464/fail-fetch.png 1536w,
/static/d7cbc799938ea69de17c73a23883b4d7/34cf9/fail-fetch.png 2858w"
            sizes="(max-width: 768px) 100vw, 768px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/d7cbc799938ea69de17c73a23883b4d7/fe486/fail-fetch.png"
            alt="ë‹¹ì—°í•˜ê² ì§€ë§Œ, ë¡œê·¸ì¸ í•˜ì§€ ì•Šì€ ìƒíƒœì—ì„  ìš”ì²­ì´ ì‹¤íŒ¨í•œë‹¤."
            title="ë‹¹ì—°í•˜ê² ì§€ë§Œ, ë¡œê·¸ì¸ í•˜ì§€ ì•Šì€ ìƒíƒœì—ì„  ìš”ì²­ì´ ì‹¤íŒ¨í•œë‹¤."
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span>
    <figcaption class="gatsby-resp-image-figcaption">ë‹¹ì—°í•˜ê² ì§€ë§Œ, ë¡œê·¸ì¸ í•˜ì§€ ì•Šì€ ìƒíƒœì—ì„  ìš”ì²­ì´ ì‹¤íŒ¨í•œë‹¤.</figcaption>
  </figure><br>
cookieì— ì €ì¥ëœ tokenì´ ì—†ìœ¼ë‹ˆ, ìš”ì²­ì„ ë³´ë‚´ë„ ë°ì´í„°ë¥¼ ë°˜í™˜í•˜ì§€ ì•Šê³  Errorë¥¼ ë˜ì§„ë‹¤.</p>
<br/>
<p><figure class="gatsby-resp-image-figure" style="">
    <span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/e27497a0d2523095cbb03f1e11f90288/31384/success-token.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 31.770833333333332%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABEUlEQVQY03WQ23KCMBRF+ZSOVHsDAbFAKORiAOWmTDu1jk7L9P8/YncSVNqHPqw5J5lk56wYJKvAyw5eyuELjrtFDNMOYc7Dsf7GDjE5Y9rjWtVbJ4Thvqyw+/gCyQrUnw3y9wqbQ418X4J3a5B1BiehGi+l8DnHcjU8vmAMPmd6T/UWSWAEUqI5vqI67lAcamy/t2j7FtWpAdlIeJTpw25Kda/CAimGUBUuRnTgnDDEskTRCOxPJWSbwzlP8hQmuHkMrlzUJtao+UdfKduR0H/YvWXo+wqilJgnVKuoqbQaZ3qCh+cYM4/8y9SLYERcwAoorDiFQxnsOB2COL9qqqq075cxpm40XHbHEMXMHQJ/AL95x+r+RhuMAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/e27497a0d2523095cbb03f1e11f90288/a59e9/success-token.webp 192w,
/static/e27497a0d2523095cbb03f1e11f90288/0ca9f/success-token.webp 384w,
/static/e27497a0d2523095cbb03f1e11f90288/dc9b9/success-token.webp 768w,
/static/e27497a0d2523095cbb03f1e11f90288/91b06/success-token.webp 976w"
              sizes="(max-width: 768px) 100vw, 768px"
              type="image/webp"
            />
          <source
            srcset="/static/e27497a0d2523095cbb03f1e11f90288/3b721/success-token.png 192w,
/static/e27497a0d2523095cbb03f1e11f90288/66595/success-token.png 384w,
/static/e27497a0d2523095cbb03f1e11f90288/fe486/success-token.png 768w,
/static/e27497a0d2523095cbb03f1e11f90288/31384/success-token.png 976w"
            sizes="(max-width: 768px) 100vw, 768px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/e27497a0d2523095cbb03f1e11f90288/fe486/success-token.png"
            alt="ì¿ í‚¤ë¥¼ ë³µí˜¸í™”í•´ ìœ ì €ì˜ ì •ë³´ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤."
            title="ì¿ í‚¤ë¥¼ ë³µí˜¸í™”í•´ ìœ ì €ì˜ ì •ë³´ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤."
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span>
    <figcaption class="gatsby-resp-image-figcaption">ì¿ í‚¤ë¥¼ ë³µí˜¸í™”í•´ ìœ ì €ì˜ ì •ë³´ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.</figcaption>
  </figure></p>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx">  <span class="token keyword">const</span> token <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span> req<span class="token operator">:</span> request<span class="token punctuation">,</span> secret<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">SECRET</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">,</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// logë¥¼ í™•ì¸</span></code></pre></div>
<p>getTokenì— ì¸ìë¡œ í¬í•¨ëœ secretì™€ cookieë¥¼ í†µí•´ ìœ ì € ì •ë³´ë¥¼ ë³µí˜¸í™”í•  ìˆ˜ ìˆë‹¤.</p>
<br/>
<h3 id="4-1-ì£¼ì˜í• -ì " style="position:relative;"><a href="#4-1-%EC%A3%BC%EC%9D%98%ED%95%A0-%EC%A0%90" aria-label="4 1 ì£¼ì˜í•  ì  permalink" class="headerElement before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4-1. ì£¼ì˜í•  ì </h3>
<blockquote>
<p>ëª‡ ë‹¬ì „, ìœ„ì™€ ê°™ì´ ì˜ ë˜ëŠ”ê±¸ í™•ì¸í•˜ê³  ì¦ê±°ìš´ ë§ˆìŒìœ¼ë¡œ í‡´ê·¼í–ˆì—ˆë‹¤.<br>
í•˜ì§€ë§Œ, ë‹¤ìŒ ë‚  ì ˆë§í–ˆë‹¤.. ğŸ˜©</p>
</blockquote>
<p>ë§Œì•½ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°€ ë„ë©”ì¸ì´ ê°ê° ë‹¤ë¥´ë‹¤ë©´ ì¶”ê°€ì ì¸ ì„¤ì •ì´ í•„ìš”í•˜ë‹¤.<br>
ê´€ë ¨ ë‚´ìš©ì€ <a href="https://seob.dev/posts/%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80-%EC%BF%A0%ED%82%A4%EC%99%80-SameSite-%EC%86%8D%EC%84%B1/" target="_blank" rel="nofollow">ì´ ê¸€</a>ì—ì„œ ì˜ ì„¤ëª…í•´ì£¼ì‹ ë‹¤.</p>
<p>ê°„ëµíˆ ì •ë¦¬í•´ë³´ìë©´,</p>
<blockquote>
<p>ì¿ í‚¤ë¡œ ì¸ì¦ì„ í•˜ëŠ” ê²½ìš°, csrf ê³µê²©ì— ì·¨ì•½í•˜ë‹¤.<br>
ê·¸ë˜ì„œ ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ <a href="https://seob.dev/posts/%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80-%EC%BF%A0%ED%82%A4%EC%99%80-SameSite-%EC%86%8D%EC%84%B1/#samesite-%EC%BF%A0%ED%82%A4" target="_blank" rel="nofollow">SameSite</a>ê°€ ë§Œë“¤ì–´ì¡Œë‹¤.</p>
<p>next-authë¥¼ ì‚¬ìš©í•˜ëŠ”ë°, í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì˜ ë„ë©”ì¸ì´ ê°ê° ë‹¤ë¥´ë‹¤ë©´,<br>
<a href="https://next-auth.js.org/configuration/options#cookies" target="_blank" rel="nofollow">ì¶”ê°€ì ì¸ ì„¤ì •</a>ì´ í•„ìš”í•˜ë‹¤.</p>
</blockquote>
<p>ì´ë²ˆì˜ ì˜ˆì‹œì—ì„ , next-authë¥¼ next.jsì—ì„œë§Œ ì‚¬ìš©í–ˆê³ ,<br>
ë°°í¬ë¥¼ í•´ë„ ë™ì¼í•œ ë„ë©”ì¸ì´ê¸°ì— ë¬¸ì œì—†ì´ ì˜ ë™ì‘í–ˆë‹¤. ğŸ€</p>
<br/>
<h3 id="ì°¸ê³ ìë£Œ" style="position:relative;"><a href="#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C" aria-label="ì°¸ê³ ìë£Œ permalink" class="headerElement before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ì°¸ê³ ìë£Œ</h3>
<ul>
<li>
<p>next-auth<br>
<a href="https://developer.mozilla.org/en-US/docs/Web/API/Broadcast_Channel_API" target="_blank" rel="nofollow">Broadcast Channel API</a><br>
<a href="https://authjs.dev/concepts/session-strategies" target="_blank" rel="nofollow">next-auth Session strategies</a></p>
</li>
<li>
<p>cookie<br>
<a href="https://seob.dev/posts/%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80-%EC%BF%A0%ED%82%A4%EC%99%80-SameSite-%EC%86%8D%EC%84%B1/" target="_blank" rel="nofollow">ë¸Œë¼ìš°ì € ì¿ í‚¤ì™€ SameSite ì†ì„±</a></p>
</li>
<li>
<p>csrf<br>
<a href="https://blog.logrocket.com/protecting-next-js-apps-csrf-attacks/" target="_blank" rel="nofollow">Protecting Next.js apps from CSRF attacks</a><br>
<a href="https://www.youtube.com/watch?v=cUmIB2sjjdw" target="_blank" rel="nofollow">ë§í¬ë§Œ í´ë¦­í–ˆëŠ”ë° ì´ê²Œ ëœë‹¤ê³ ? | ì›¹ í•´í‚¹ CSRF á„€á…©á†¼á„€á…§á†¨ | CSRF ê³µê²© ì´ë ‡ê²Œ í•œë‹¤!</a></p>
</li>
</ul></div></div><style data-emotion="css ts6ysa">.css-ts6ysa{width:300px;position:-webkit-sticky;position:sticky;top:0;right:0;padding-top:130px;margin-left:5rem;overflow:auto;}@media (max-width: 1300px){.css-ts6ysa{display:none;}}</style><aside class="css-ts6ysa etse75s1"><style data-emotion="css 1fg89mx">.css-1fg89mx{position:-webkit-sticky;position:sticky;border-left:2px solid #ddd8d8;background-color:white;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.css-1fg89mx ul{color:gray;padding-left:1rem;list-style:none;line-height:24px;scale:1;}.css-1fg89mx ul .active{color:black;font-weight:700;}</style><div id="post-toc" class="css-1fg89mx etse75s0"><ul>
<li>
<p><a href="#1-token%EC%9D%98-%ED%95%84%EC%9A%94%EC%84%B1">1. Tokenì˜ í•„ìš”ì„±</a></p>
</li>
<li>
<p><a href="#2-next-auth-token-%EA%B4%80%EB%A6%AC-%EB%B0%A9%EB%B2%95">2. next-auth Token ê´€ë¦¬ ë°©ë²•</a></p>
<ul>
<li><a href="#2-1-%EC%9D%B8%EC%A6%9Dauthentication%EA%B3%BC-%EC%9D%B8%EA%B0%80authorization%EA%B0%80-%EB%AD%98%EA%B9%8C">2-1. ì¸ì¦(Authentication)ê³¼ ì¸ê°€(Authorization)ê°€ ë­˜ê¹Œ?</a></li>
</ul>
</li>
<li>
<p><a href="#3-next-auth%EB%8A%94-%EC%9D%B8%EC%A6%9D%EC%9D%84-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%9C%A0%EC%A7%80%ED%95%A0%EA%B9%8C">3. next-authëŠ” ì¸ì¦ì„ ì–´ë–»ê²Œ ìœ ì§€í• ê¹Œ?</a></p>
<ul>
<li>
<p><a href="#3-1-%EB%A1%9C%EA%B7%B8%EC%9D%B8-%ED%96%88%EC%9D%84-%EB%95%8C-%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80%EC%97%90-%EC%A0%80%EC%9E%A5%EB%90%98%EB%8A%94-%EC%A0%95%EB%B3%B4">3-1. ë¡œê·¸ì¸ í–ˆì„ ë•Œ ë¸Œë¼ìš°ì €ì— ì €ì¥ë˜ëŠ” ì •ë³´</a></p>
<ul>
<li><a href="#local-storage%EC%97%90-%EC%A0%80%EC%9E%A5%EB%90%98%EB%8A%94-%EC%A0%95%EB%B3%B4">Local Storageì— ì €ì¥ë˜ëŠ” ì •ë³´</a></li>
<li><a href="#cookie%EC%97%90-%EC%A0%80%EC%9E%A5%EB%90%98%EB%8A%94-%EC%A0%95%EB%B3%B4">Cookieì— ì €ì¥ë˜ëŠ” ì •ë³´</a></li>
</ul>
</li>
<li>
<p><a href="#3-2-next-auth-%EC%9D%B8%EC%A6%9D%EC%9D%84-%EC%9C%A0%EC%A7%80%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95">3-2. next-auth ì¸ì¦ì„ ìœ ì§€í•˜ëŠ” ë°©ë²•</a></p>
</li>
</ul>
</li>
<li>
<p><a href="#4-next-auth%EC%9D%98-%EC%9D%B8%EA%B0%80%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%9D%B4%EB%A3%A8%EC%96%B4%EC%A7%88%EA%B9%8C">4. next-authì˜ ì¸ê°€ëŠ” ì–´ë–»ê²Œ ì´ë£¨ì–´ì§ˆê¹Œ?</a></p>
<ul>
<li>
<ul>
<li><a href="#4-1-%EC%A3%BC%EC%9D%98%ED%95%A0-%EC%A0%90">4-1. ì£¼ì˜í•  ì </a></li>
<li><a href="#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C">ì°¸ê³ ìë£Œ</a></li>
</ul>
</li>
</ul>
</li>
</ul></div></aside></div><div></div><style data-emotion="css 11u7q11">.css-11u7q11{display:grid;place-items:center;margin-top:auto;padding:70px 0;color:gray;font-size:15px;text-align:center;line-height:1.5;}@media (max-width: 768px){.css-11u7q11{font-size:12px;padding:50px 0;}}</style><footer class="css-11u7q11 e1oae0v80">Â© <!-- -->2026<!-- --> Geuni, Powered By Gatsby.</footer></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/2024/1/17/authorization/";window.___webpackCompilationHash="f732bc29a34b2fd1854d";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-c9fa82aa5b1f9c65f078.js"],"app":["/app-5f4028ff9c0e41abf41e.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-3d063b1ad72c7288ab1c.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-06fbe9ebade3fa4896dc.js"],"component---src-templates-post-template-tsx":["/component---src-templates-post-template-tsx-3f6da52bad5615a8b621.js"]};/*]]>*/</script><script src="/polyfill-c9fa82aa5b1f9c65f078.js" nomodule=""></script><script src="/app-5f4028ff9c0e41abf41e.js" async=""></script><script src="/framework-e3dc0f184baa7501f320.js" async=""></script><script src="/webpack-runtime-f3d05db4a414f4d46b70.js" async=""></script></body></html>